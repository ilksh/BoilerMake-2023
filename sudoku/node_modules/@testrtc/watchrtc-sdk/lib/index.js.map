{"version":3,"sources":["webpack://watchRTC/webpack/universalModuleDefinition","webpack://watchRTC/./src/index.ts","webpack://watchRTC/./src/sdk.ts","webpack://watchRTC/./src/stats.ts","webpack://watchRTC/./src/types.ts","webpack://watchRTC/./src/utils.ts","webpack://watchRTC/./src/version.ts","webpack://watchRTC/./src/watchrtchttp.ts","webpack://watchRTC/./src/watchrtcsocket.ts","webpack://watchRTC/./src/detect-gpu.js","webpack://watchRTC/./src/gpu-benchmarks|sync|/^/.*$","webpack://watchRTC/./src/lz-string.js","webpack://watchRTC/webpack/bootstrap","webpack://watchRTC/webpack/startup","webpack://watchRTC/webpack/runtime/hasOwnProperty shorthand"],"names":["root","factory","exports","module","define","amd","self","sdk_1","watchrtcConfig","services","initSDK","setConfig","_rtcTags","rating","comment","setUserRating","keys","addKeys","disableDataCollection","enableDataCollection","event","addEvent","id","name","mapStream","connect","disconnect","listener","registerOnStatsListener","default","init","addTags","addStatsListener","__assign","this","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","__generator","body","f","y","g","_","label","sent","trys","ops","verb","Symbol","iterator","v","op","TypeError","pop","push","__spreadArray","to","from","pack","ar","l","Array","slice","concat","defineProperty","trace","getStatsInterval","hardwareInfo","currentAudioOutputId","reconnectTimerId","getStatsCallback","watchrtcsocket_1","watchrtchttp_1","utils_1","version_1","isFirefox","window","mozRTCPeerConnection","openChannels","RTCPeerConnection","navigator","webkitGetUserMedia","watchrtcIdentifiers","rtcRoomId","undefined","rtcPeerId","projectId","http","socket","lastConnectionOpen","tryingToConnectSocket","authFailed","isManualConnect","isManualDisconnect","debugLog","bind","debug","maybeOpenWebsocketConnection","_a","_b","_c","forceRecreate","_d","reconnecting","_e","pcId","JSON","stringify","connection","readyState","WebSocket","OPEN","isRoomIdOrPeerIdChanged","close","connectionCount","countOfValidConnections","canConnect","validateConfig","forEach","k","useToken","rtcToken","wsConnectionData","getConnectionData","rtcApiKey","proxyUrl","Date","now","wsOpeningTimestamp","url","key","data","allowBrowserLogCollection","Boolean","collectConsoleLogEnabled","console","override","collectConsoleLogLevel","setConsoleLevel","restoreOriginalConsoleMethods","buffer","filter","info","logPrefix","connectionId","sdkVersion","clearInterval","setInterval","stats","_i","pcInfo","peer","streams","connections","values","pc","signalingState","getStats","interval","type","delta","closeEvent","code","reason","wasClean","__reject","id_1","pc_1","prev_1","prev","res","report","map2obj","base","parse","applyPatchForRTT","deltaCompression","timestamp","exposeApplicationStatsForPC","watchrtc","prefixesToWrap","watchRTCInitialized","toString","indexOf","warn","setTimeout","getHardwareStartTime","getHardwareInfo","hwInfo","getHardwareTime","catch","err","error","message","urlParams","URLSearchParams","location","search","has","get","peerconnectioncounter","socketService","httpService","wsUrl","prefix","origPeerConnection","peerconnection","config","constraints","__rtcStatsId","validConnection","nullConfig","iceServers","server","credential","browserType","addEventListener","candidate","stream","getTracks","map","kind","track","iceConnectionState","iceGatheringState","connectionState","channel","HTMLMediaElement","nativeMethod_1","setSinkId","selectedDeviceId","mediaDevices","enumerateDevices","devices","currentDevice","find","deviceId","RTCRtpSender","origRTCRtpSender","nativeMethod_2","setParameters","__pcId","method","nativeMethod","join","trackOrKind","transceiver","sender","streamInfo","opts","rtcStatsId","args","description","_this","needToHandleSDPInSuccessCallback","sdp","parameterless","localDescription","generateCertificate","origGetUserMedia","cb","eb","dumpStream","errorData","httpReportError","getUserMedia","origGetUserMedia_1","getDisplayMedia","origGetDisplayMedia_1","level","newWatchrtcConfig","ratingComment","validateRating","opened","options","promiseFuncs","httpTrace","wasConnected","validateEvent","log","httpConnectionData","apiKey","getStreamsFromStats","getTransportFromStats","reports","reportKeys","keyPairs","reportKey","nominated","localCandidateId_1","localCandidateId","remoteCandidateId_1","remoteCandidateId","localCandidateKey","remoteCandidateKey","localCandidate","remoteCandidate","candidateType","transport","relayProtocol","address","port","previous","current","streamKey","currentReport","previousReport","direction","currentRemoteReport","remoteId","previousRemoteReport","deltaSeconds","peerId","frameWidth","frameHeight","framerate","framesPerSecond","jitter","bytesReceived","packetsReceived","packetsLost","packetsLoss","bitrate","roundTripTime","bytesSent","packetsSent","fractionLost","mangleChromeStats","GPU","stats_1","getDebugStatus","object","logArgs","oldStats","newStats","getTime","isArray","response","standardReport","standardStats","names","stat","m","entries","o","tracks","enabled","muted","proxyURL","localUrl","staging1Url","staging2Url","productionUrl","production1Url","includes","replace","splitted","split","changed","old","new","parameters","number_format","num","Math","round","toFixed","loadBenchmarks","gpuInfo","memory","fileName","shift","stack","getGPUTier","cores_count","hardwareConcurrency","performance","jsHeapSizeLimit","totalJSHeapSize","usedJSHeapSize","patchConsoleConfig","originalMethodPrefix","methodsToPatch","patchConsoleMethod","methodName","originalMethod","currentMethodIndex","configMethodIndex","shouldTraceMethod","text","stringifyArgs","currentIndex","previousIndex","item","replacerFunc","visited","WeakSet","_key","add","hasOldStats","statsHaveRTTMeasurements","roundTripTimeMeasurements","NaN","WatchRTCHttp","_instance","fetch","mode","cache","credentials","headers","LZString","WatchRTCSocket","sendInterval","onClose","dataCollection","sendPromises","lines","compressedMessage","compressToEncodedURIComponent","logFunc","_original_log","send","onData","onError","onOpen","onopen","onclose","onmessage","onerror","toggleDebug","r","setPrototypeOf","__proto__","a","u","c","throw","return","toLowerCase","userAgent","platform","maxTouchPoints","test","MSStream","isIpad","isMobile","isSafari12","createShader","createProgram","shaderSource","compileShader","attachShader","linkProgram","detachShader","deleteShader","useProgram","createBuffer","bindBuffer","bufferData","Float32Array","getAttribLocation","vertexAttribPointer","enableVertexAttribArray","clearColor","clear","viewport","drawArrays","Uint8Array","readPixels","deleteProgram","deleteBuffer","d","charCodeAt","h","constructor","String","create","Error","mobileTiers","desktopTiers","b","glContext","w","failIfMajorPerformanceCaveat","x","benchmarksURL","A","S","C","E","L","M","j","B","O","T","U","I","D","R","G","N","K","W","tier","screenSize","screen","json","parseInt","renderer","match","sort","Number","MAX_VALUE","devicePixelRatio","width","height","abs","device","fps","gpu","alpha","antialias","depth","powerPreference","stencil","document","createElement","getContext","getExtension","getParameter","UNMASKED_RENDERER_WEBGL","all","webpackContext","req","webpackContextResolve","__webpack_require__","charAt","fromCharCode","compressToBase64","_compress","decompressFromBase64","_decompress","compressToUTF16","decompressFromUTF16","compressToUint8Array","compress","decompressFromUint8Array","decompress","decompressFromEncodedURIComponent","pow","val","position","index","__webpack_module_cache__","moduleId","__webpack_modules__","obj","prop"],"mappings":"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","file":"index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"watchRTC\"] = factory();\n\telse\n\t\troot[\"watchRTC\"] = factory();\n})(self, function() {\nreturn ","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.addStatsListener = exports.disconnect = exports.connect = exports.mapStream = exports.addEvent = exports.enableDataCollection = exports.disableDataCollection = exports.addKeys = exports.setUserRating = exports.addTags = exports.setConfig = exports.init = void 0;\r\nrequire(\"./types\");\r\nvar sdk_1 = require(\"./sdk\");\r\n/**\r\n * Initialize SDK. Can be called multiple times but it will be initialized only at the first time.\r\n * Use 'setConfig' function after if you don't have rtcRoomId and rtcPeerId yet.\r\n * @param watchrtc\r\n * @param prefixesToWrap\r\n * @param services\r\n */\r\nvar init = function (watchrtcConfig, services) {\r\n    (0, sdk_1.initSDK)((watchrtcConfig || {}), [\"\"], services);\r\n};\r\nexports.init = init;\r\n/**\r\n * You also can use watchRTC.setConfig function to set watchRTC configuration after calling init()\r\n * and before the creation of RTCPeerConnection objects\r\n */\r\nvar setConfig = function (watchrtcConfig) {\r\n    (0, sdk_1.setConfig)(watchrtcConfig);\r\n};\r\nexports.setConfig = setConfig;\r\n/**\r\n * @deprecated Tags no longer supported. Use addKeys instead\r\n * Add tags for peer session\r\n * @param rtcTags[]\r\n */\r\nvar addTags = function (\r\n/** [\"tag1\", \"tag2\", \"tag3\"] */\r\n_rtcTags) { };\r\nexports.addTags = addTags;\r\n/**\r\n * Set user rating and/or comment for peer session\r\n * @param rating number from 1 to 5\r\n * @param comment string\r\n */\r\nvar setUserRating = function (\r\n/** 1 | 2 | 3 | 4 | 5 */\r\nrating, comment) {\r\n    (0, sdk_1.setUserRating)(rating, comment);\r\n};\r\nexports.setUserRating = setUserRating;\r\n/**\r\n * Add keys for peer session\r\n * @param keys\r\n */\r\nvar addKeys = function (\r\n/** { \"key1\": \"value1\", \"key2\": [\"value2_1\", \"value2_2\"]} */\r\nkeys) {\r\n    (0, sdk_1.addKeys)(keys);\r\n};\r\nexports.addKeys = addKeys;\r\n/**\r\n * Disables data collection\r\n */\r\nvar disableDataCollection = function () {\r\n    (0, sdk_1.disableDataCollection)();\r\n};\r\nexports.disableDataCollection = disableDataCollection;\r\n/**\r\n * Enables data collection\r\n */\r\nvar enableDataCollection = function () {\r\n    (0, sdk_1.enableDataCollection)();\r\n};\r\nexports.enableDataCollection = enableDataCollection;\r\nvar addEvent = function (event) {\r\n    (0, sdk_1.addEvent)(event);\r\n};\r\nexports.addEvent = addEvent;\r\nvar mapStream = function (id, name) {\r\n    (0, sdk_1.mapStream)(id, name);\r\n};\r\nexports.mapStream = mapStream;\r\nvar connect = function () {\r\n    (0, sdk_1.connect)();\r\n};\r\nexports.connect = connect;\r\nvar disconnect = function () {\r\n    (0, sdk_1.disconnect)();\r\n};\r\nexports.disconnect = disconnect;\r\nvar addStatsListener = function (listener) {\r\n    (0, sdk_1.registerOnStatsListener)(listener);\r\n};\r\nexports.addStatsListener = addStatsListener;\r\nexports.default = {\r\n    /**\r\n     * Initialize SDK. Can be called multiple times but it will be initialized only at the first time.\r\n     * Use 'setConfig' function after if you don't have rtcRoomId and rtcPeerId yet.\r\n     * @param watchrtc\r\n     * @param prefixesToWrap\r\n     */\r\n    init: exports.init,\r\n    /**\r\n     * @deprecated Tags no longer supported. Use addKeys instead\r\n     * Add tags for peer session\r\n     * @param rtcTags[]\r\n     */\r\n    addTags: exports.addTags,\r\n    /**\r\n     * Set user rating and/or comment for peer session\r\n     * @param rating number from 1 to 5\r\n     * @param comment string\r\n     */\r\n    setUserRating: exports.setUserRating,\r\n    /**\r\n     * Add keys for peer session\r\n     * @param keys\r\n     */\r\n    addKeys: exports.addKeys,\r\n    /**\r\n     * You also can use watchRTC.setConfig function to set watchRTC configuration after calling init()\r\n     * and before the creation of RTCPeerConnection objects\r\n     */\r\n    setConfig: exports.setConfig,\r\n    /**\r\n     * Disables data collection\r\n     */\r\n    disableDataCollection: exports.disableDataCollection,\r\n    /**\r\n     * Enables data collection\r\n     */\r\n    enableDataCollection: exports.enableDataCollection,\r\n    addEvent: exports.addEvent,\r\n    mapStream: exports.mapStream,\r\n    connect: exports.connect,\r\n    disconnect: exports.disconnect,\r\n    addStatsListener: exports.addStatsListener,\r\n};\r\n","\"use strict\";\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.registerOnStatsListener = exports.disconnect = exports.connect = exports.mapStream = exports.addEvent = exports.enableDataCollection = exports.disableDataCollection = exports.addKeys = exports.setUserRating = exports.setConfig = exports.initSDK = void 0;\r\nvar watchrtcsocket_1 = require(\"./watchrtcsocket\");\r\nvar watchrtchttp_1 = require(\"./watchrtchttp\");\r\nvar utils_1 = require(\"./utils\");\r\nvar version_1 = require(\"./version\");\r\nvar standardGetstats = true;\r\nvar isFirefox = !!window.mozRTCPeerConnection;\r\nvar isSafari = !isFirefox && window.RTCPeerConnection && !window.navigator.webkitGetUserMedia;\r\n// Data structure for RTCPeerConnection related stuff we need\r\nvar openChannels = {};\r\nvar watchrtcIdentifiers = {\r\n    rtcRoomId: undefined,\r\n    rtcPeerId: undefined,\r\n    projectId: undefined,\r\n};\r\nvar watchrtcConfig = null;\r\nvar http = null;\r\nvar socket = null;\r\nvar trace;\r\nvar lastConnectionOpen = 0; // so we know when was the last active connection seen\r\nvar getStatsInterval;\r\nvar tryingToConnectSocket = false;\r\nvar hardwareInfo;\r\nvar currentAudioOutputId;\r\nvar authFailed = false;\r\nvar reconnectTimerId;\r\nvar isManualConnect = false;\r\nvar isManualDisconnect = false;\r\nvar getStatsCallback;\r\nvar debugLog = utils_1.debugLog.bind(null, function () { return watchrtcConfig === null || watchrtcConfig === void 0 ? void 0 : watchrtcConfig.debug; });\r\nvar maybeOpenWebsocketConnection = function (_a) {\r\n    var _b;\r\n    var _c = _a.forceRecreate, forceRecreate = _c === void 0 ? false : _c, _d = _a.reconnecting, reconnecting = _d === void 0 ? false : _d, _e = _a.pcId, pcId = _e === void 0 ? \"PC_unknown\" : _e;\r\n    debugLog(\"info\", \"maybeOpenWebsocketConnection called: [\".concat(pcId, \"]\"), {\r\n        forceRecreate: forceRecreate,\r\n        reconnecting: reconnecting,\r\n        isManualDisconnect: isManualDisconnect,\r\n        tryingToConnectSocket: tryingToConnectSocket,\r\n        watchrtcConfig: watchrtcConfig,\r\n        openChannels: JSON.stringify(openChannels),\r\n    });\r\n    isManualDisconnect = false;\r\n    var opened = ((_b = socket === null || socket === void 0 ? void 0 : socket.connection) === null || _b === void 0 ? void 0 : _b.readyState) === WebSocket.OPEN;\r\n    if (opened) {\r\n        var roomIdOrPeerIdChanged = (0, utils_1.isRoomIdOrPeerIdChanged)(watchrtcIdentifiers, watchrtcConfig);\r\n        if (roomIdOrPeerIdChanged && forceRecreate) {\r\n            debugLog(\"info\", \"maybeOpenWebsocketConnection. Closing WS connection. [\".concat(pcId, \"]\"));\r\n            socket === null || socket === void 0 ? void 0 : socket.close();\r\n        }\r\n        else {\r\n            debugLog(\"info\", \"maybeOpenWebsocketConnection. WS connection already opened [\".concat(pcId, \"]\"));\r\n            return;\r\n        }\r\n    }\r\n    var connectionCount = (0, utils_1.countOfValidConnections)(openChannels);\r\n    if (!isManualConnect && connectionCount < 1 && !tryingToConnectSocket) {\r\n        debugLog(\"info\", \"maybeOpenWebsocketConnection. WS connection not opened - previous connect call not finised or missing peer connection [\".concat(pcId, \"]\"), {\r\n            openChannels: JSON.stringify(openChannels),\r\n            connectionCount: connectionCount,\r\n            tryingToConnectSocket: tryingToConnectSocket,\r\n            isManualConnect: isManualConnect,\r\n        });\r\n        return;\r\n    }\r\n    var canConnect = (0, utils_1.validateConfig)(watchrtcConfig);\r\n    var id = Object.keys(openChannels)[connectionCount - 1]; // not very critical, but for consistency with trace\r\n    if (!canConnect) {\r\n        tryingToConnectSocket = false;\r\n        debugLog(\"info\", \"maybeOpenWebsocketConnection. WS connection not opened - invalid config [\".concat(pcId, \"]\"), {\r\n            watchrtcConfig: watchrtcConfig,\r\n        });\r\n        return;\r\n    }\r\n    if (watchrtcConfig.keys) {\r\n        Object.keys(watchrtcConfig.keys || {}).forEach(function (k) {\r\n            if (typeof watchrtcConfig.keys[k] === \"string\") {\r\n                watchrtcConfig.keys[k] = [watchrtcConfig.keys[k]];\r\n            }\r\n        });\r\n    }\r\n    var useToken = !!watchrtcConfig.rtcToken;\r\n    var wsConnectionData = (0, utils_1.getConnectionData)(\"ws\", useToken ? watchrtcConfig.rtcToken : watchrtcConfig.rtcApiKey, watchrtcConfig.proxyUrl);\r\n    if (!socket) {\r\n        debugLog(\"error\", \"maybeOpenWebsocketConnection. WS socket wasn't initialized [\".concat(pcId, \"]\"));\r\n    }\r\n    tryingToConnectSocket = true;\r\n    lastConnectionOpen = Date.now();\r\n    debugLog(\"info\", \"maybeOpenWebsocketConnection. Opening websocket connection [\".concat(pcId, \"]\"));\r\n    var wsOpeningTimestamp = Date.now();\r\n    socket === null || socket === void 0 ? void 0 : socket.connect(\"\".concat(wsConnectionData.url, \"?\").concat(useToken ? \"token\" : \"apiKey\", \"=\").concat(wsConnectionData.key, \"&timestamp=\").concat(Date.now()), function (data) {\r\n        var _a;\r\n        watchrtcIdentifiers.projectId = data.projectId;\r\n        tryingToConnectSocket = false;\r\n        watchrtcConfig.allowBrowserLogCollection = Boolean(data.collectConsoleLogEnabled);\r\n        if (!watchrtcConfig.allowBrowserLogCollection) {\r\n            (0, utils_1.restoreOriginalConsoleMethods)();\r\n            // clean up collected logs from socket buffer\r\n            if (socket === null || socket === void 0 ? void 0 : socket.buffer) {\r\n                socket.buffer = socket.buffer.filter(function (data) { return data[0] !== \"log\"; });\r\n            }\r\n        }\r\n        else {\r\n            if (!((_a = watchrtcConfig === null || watchrtcConfig === void 0 ? void 0 : watchrtcConfig.console) === null || _a === void 0 ? void 0 : _a.override) && data.collectConsoleLogLevel) {\r\n                (0, utils_1.setConsoleLevel)(data.collectConsoleLogLevel, trace);\r\n            }\r\n        }\r\n        console.info.apply(console, __spreadArray(__spreadArray([], (0, utils_1.logPrefix)(\"info\"), false), [\"Connection established. watchRTCConnectionId: \".concat(data.connectionId, \" sdkVersion:\").concat(version_1.default, \" [\").concat(pcId, \"]\")], false));\r\n        trace({ data: [\"watchrtc\", id, __assign(__assign(__assign({}, watchrtcConfig), data), { sdkVersion: version_1.default })] });\r\n        if (reconnecting) {\r\n            trace({ data: [\"reconnect\", null, null] });\r\n        }\r\n        if (hardwareInfo) {\r\n            trace({ data: [\"hardware\", null, hardwareInfo] });\r\n        }\r\n        window.clearInterval(getStatsInterval);\r\n        getStatsInterval = window.setInterval(function () {\r\n            return __awaiter(this, void 0, void 0, function () {\r\n                var stats, _i, _a, pcInfo, _b, peer, streams;\r\n                return __generator(this, function (_c) {\r\n                    switch (_c.label) {\r\n                        case 0:\r\n                            if (!(!isManualConnect && (0, utils_1.countOfValidConnections)(openChannels) === 0)) return [3 /*break*/, 1];\r\n                            debugLog(\"info\", \"getStatsInterval. No valid connections at this time\");\r\n                            // if we don't have any connection for 20 sec we can close the socket\r\n                            if (lastConnectionOpen && lastConnectionOpen + 20000 < Date.now()) {\r\n                                window.clearInterval(getStatsInterval);\r\n                                socket === null || socket === void 0 ? void 0 : socket.close();\r\n                                console.info.apply(console, __spreadArray(__spreadArray([], (0, utils_1.logPrefix)(\"info\"), false), [\"Last connection closed. watchRTCConnectionId: \".concat(data.connectionId, \" sdkVersion: \").concat(version_1.default)], false));\r\n                            }\r\n                            return [3 /*break*/, 6];\r\n                        case 1:\r\n                            lastConnectionOpen = Date.now();\r\n                            stats = { connections: {}, streams: {} };\r\n                            _i = 0, _a = Object.values(openChannels);\r\n                            _c.label = 2;\r\n                        case 2:\r\n                            if (!(_i < _a.length)) return [3 /*break*/, 5];\r\n                            pcInfo = _a[_i];\r\n                            debugLog(\"info\", \"getStatsInterval. \".concat(pcInfo.id, \" signalingState: \").concat(pcInfo.pc.signalingState));\r\n                            if (!(pcInfo.pc.signalingState !== \"closed\")) return [3 /*break*/, 4];\r\n                            return [4 /*yield*/, getStats(pcInfo)];\r\n                        case 3:\r\n                            _b = _c.sent(), peer = _b.peer, streams = _b.streams;\r\n                            stats.connections = __assign(__assign({}, stats.connections), peer);\r\n                            stats.streams = __assign(__assign({}, stats.streams), streams);\r\n                            _c.label = 4;\r\n                        case 4:\r\n                            _i++;\r\n                            return [3 /*break*/, 2];\r\n                        case 5:\r\n                            if (getStatsCallback) {\r\n                                getStatsCallback(stats);\r\n                            }\r\n                            _c.label = 6;\r\n                        case 6: return [2 /*return*/];\r\n                    }\r\n                });\r\n            });\r\n        }, data.interval);\r\n    }, function (_, type) {\r\n        if (type === \"auth\") {\r\n            authFailed = true;\r\n        }\r\n        tryingToConnectSocket = false;\r\n        lastConnectionOpen = 0;\r\n    }, function () {\r\n        authFailed = false;\r\n        if (reconnectTimerId) {\r\n            clearInterval(reconnectTimerId);\r\n            reconnectTimerId = undefined;\r\n        }\r\n        var delta = Date.now() - wsOpeningTimestamp;\r\n        debugLog(\"info\", \"maybeOpenWebsocketConnection. Connection opened. Opening time - \".concat(delta, \" ms [\").concat(pcId, \"]\"));\r\n    }, function (closeEvent) {\r\n        var code = closeEvent.code, reason = closeEvent.reason, wasClean = closeEvent.wasClean;\r\n        debugLog(\"info\", \"close event\", { authFailed: authFailed, code: code, reason: reason, wasClean: wasClean });\r\n        if (authFailed) {\r\n            if (reconnectTimerId) {\r\n                clearInterval(reconnectTimerId);\r\n            }\r\n        }\r\n        else if (!reconnectTimerId && !isManualDisconnect) {\r\n            maybeOpenWebsocketConnection({ reconnecting: true, pcId: pcId });\r\n            reconnectTimerId = setInterval(function () {\r\n                maybeOpenWebsocketConnection({ reconnecting: true, pcId: pcId });\r\n            }, 30 * 1000);\r\n        }\r\n    });\r\n};\r\nvar getStats = function (pcInfo) {\r\n    return new Promise(function (resolve, __reject) {\r\n        if (pcInfo) {\r\n            var id_1 = pcInfo.id, pc_1 = pcInfo.pc, prev_1 = pcInfo.prev;\r\n            if (standardGetstats || isFirefox || isSafari) {\r\n                pc_1.getStats(null).then(function (res) {\r\n                    debugLog(\"info\", \"getStats res\", { res: res });\r\n                    var now = {};\r\n                    if (isFirefox) {\r\n                        res.forEach(function (report) {\r\n                            now[\"\".concat(report.type, \"_\").concat(report.id)] = report;\r\n                        });\r\n                    }\r\n                    else {\r\n                        now = (0, utils_1.map2obj)(res);\r\n                    }\r\n                    var base = JSON.parse(JSON.stringify(now)); // our new prev\r\n                    now = (0, utils_1.applyPatchForRTT)(prev_1, now);\r\n                    var data = (0, utils_1.deltaCompression)(prev_1, now, watchrtcConfig === null || watchrtcConfig === void 0 ? void 0 : watchrtcConfig.debug);\r\n                    debugLog(\"info\", \"getStats(null) [\".concat(id_1, \"]\"), { data: data });\r\n                    if ((data === null || data === void 0 ? void 0 : data.timestamp) !== null && (data === null || data === void 0 ? void 0 : data.timestamp) !== -Infinity) {\r\n                        trace({ data: [\"getstats\", id_1, data] });\r\n                    }\r\n                    pcInfo.prev = base;\r\n                    resolve((0, utils_1.exposeApplicationStatsForPC)(id_1, prev_1, now));\r\n                });\r\n            }\r\n            else {\r\n                pc_1.getStats(function (res) {\r\n                    var now = (0, utils_1.mangleChromeStats)(pc_1, res);\r\n                    var base = JSON.parse(JSON.stringify(now)); // our new prev\r\n                    var data = (0, utils_1.deltaCompression)(prev_1, now, watchrtcConfig === null || watchrtcConfig === void 0 ? void 0 : watchrtcConfig.debug);\r\n                    debugLog(\"info\", \"getStats() [\".concat(id_1, \"]\"), { data: data });\r\n                    if ((data === null || data === void 0 ? void 0 : data.timestamp) !== null && (data === null || data === void 0 ? void 0 : data.timestamp) !== -Infinity) {\r\n                        trace({ data: [\"getstats\", id_1, data] });\r\n                    }\r\n                    pcInfo.prev = base;\r\n                    resolve((0, utils_1.exposeApplicationStatsForPC)(id_1, prev_1, now));\r\n                });\r\n            }\r\n        }\r\n    });\r\n};\r\nvar getHardware = function () {\r\n    setTimeout(function () {\r\n        // if get hardware take more than 50 ms then do not save it\r\n        var getHardwareStartTime = Date.now();\r\n        (0, utils_1.getHardwareInfo)()\r\n            .then(function (hwInfo) {\r\n            var getHardwareTime = Date.now() - getHardwareStartTime;\r\n            if (getHardwareTime <= 50000) {\r\n                hardwareInfo = hwInfo;\r\n                debugLog(\"info\", \"getHardware\", { hardwareInfo: hardwareInfo });\r\n            }\r\n            else {\r\n                debugLog(\"info\", \"getHardware failure: getHardwareTime: \".concat(getHardwareTime), { hardwareInfo: hardwareInfo });\r\n            }\r\n        })\r\n            .catch(function (err) {\r\n            console.error(\"Error. Get hardware info: \".concat(err.message));\r\n        });\r\n    }, 0);\r\n};\r\n/**\r\n * Initialize SDK.\r\n * @param watchrtc\r\n * @param prefixesToWrap\r\n * @param services\r\n */\r\nvar initSDK = function (watchrtc, prefixesToWrap, services) {\r\n    var _a;\r\n    var initialized = window.watchRTCInitialized;\r\n    if (initialized) {\r\n        return;\r\n    }\r\n    else {\r\n        var isRTCPeerConnectionNative = RTCPeerConnection.toString().indexOf(\"[native code]\") !== -1;\r\n        if (!isRTCPeerConnectionNative) {\r\n            console.warn.apply(console, __spreadArray(__spreadArray([], (0, utils_1.logPrefix)(\"info\"), false), [\"init. RTCPeerConnection object has been already overriden\"], false));\r\n        }\r\n        window.watchRTCInitialized = true;\r\n        getHardware();\r\n    }\r\n    var urlParams = new URLSearchParams(location.search);\r\n    if (urlParams.has(\"watchrtc\") && urlParams.get(\"watchrtc\") === \"debug\") {\r\n        watchrtc.debug = true;\r\n    }\r\n    var peerconnectioncounter = 0;\r\n    socket = (services === null || services === void 0 ? void 0 : services.socketService) || new watchrtcsocket_1.default({ debug: watchrtc === null || watchrtc === void 0 ? void 0 : watchrtc.debug });\r\n    http = (services === null || services === void 0 ? void 0 : services.httpService) || new watchrtchttp_1.default({ debug: watchrtc === null || watchrtc === void 0 ? void 0 : watchrtc.debug });\r\n    watchrtcConfig = watchrtc;\r\n    watchrtcIdentifiers.rtcRoomId = watchrtcConfig.rtcRoomId;\r\n    watchrtcIdentifiers.rtcPeerId = watchrtcConfig.rtcPeerId;\r\n    trace = socket.trace;\r\n    if (watchrtcConfig.wsUrl) {\r\n        console.warn.apply(console, __spreadArray(__spreadArray([], (0, utils_1.logPrefix)(\"info\"), false), [\"\\\"wsUrl\\\" config property is deprecated. Use \\\"proxyUrl\\\" instead of it\"], false));\r\n    }\r\n    if (watchrtcConfig.proxyUrl) {\r\n        console.info.apply(console, __spreadArray(__spreadArray([], (0, utils_1.logPrefix)(\"info\"), false), [\"\\\"proxyUrl\\\" is used\"], false));\r\n    }\r\n    prefixesToWrap.forEach(function (prefix) {\r\n        if (!window[prefix + \"RTCPeerConnection\"]) {\r\n            return;\r\n        }\r\n        var origPeerConnection = window[prefix + \"RTCPeerConnection\"];\r\n        var peerconnection = function (config, constraints) {\r\n            if (config === null || config === void 0 ? void 0 : config.watchrtc) {\r\n                watchrtcConfig = __assign(__assign({}, watchrtcConfig), config.watchrtc);\r\n            }\r\n            debugLog(\"info\", \"new RTCPeerConnection called.\", {\r\n                config: config,\r\n                constraints: constraints,\r\n            });\r\n            var pc = new origPeerConnection(config, constraints);\r\n            var id = \"PC_\" + peerconnectioncounter++;\r\n            pc.__rtcStatsId = id;\r\n            openChannels[id] = {\r\n                id: id,\r\n                pc: pc,\r\n                validConnection: false,\r\n            };\r\n            if (!config) {\r\n                config = { nullConfig: true };\r\n            }\r\n            config = JSON.parse(JSON.stringify(config)); // deepcopy\r\n            // don't log credentials\r\n            ((config && config.iceServers) || []).forEach(function (server) {\r\n                delete server.credential;\r\n            });\r\n            if (config === null || config === void 0 ? void 0 : config.watchrtc) {\r\n                delete config.watchrtc;\r\n            }\r\n            if (isFirefox) {\r\n                config.browserType = \"moz\";\r\n            }\r\n            else {\r\n                config.browserType = \"webkit\";\r\n            }\r\n            trace({ data: [\"create\", id, config] });\r\n            // TODO: do we want to log constraints here? They are chrome-proprietary.\r\n            // http://stackoverflow.com/questions/31003928/what-do-each-of-these-experimental-goog-rtcpeerconnectionconstraints-do\r\n            if (constraints) {\r\n                trace({ data: [\"constraints\", id, constraints] });\r\n            }\r\n            pc.addEventListener(\"icecandidate\", function (e) {\r\n                trace({ data: [\"onicecandidate\", id, e.candidate] });\r\n            });\r\n            pc.addEventListener(\"icecandidateerror\", function (e) {\r\n                trace({ data: [\"onicecandidateerror\", id, e] });\r\n            });\r\n            pc.addEventListener(\"addstream\", function (e) {\r\n                trace({\r\n                    data: [\r\n                        \"onaddstream\",\r\n                        id,\r\n                        e.stream.id +\r\n                            \" \" +\r\n                            e.stream.getTracks().map(function (t) {\r\n                                return t.kind + \":\" + t.id;\r\n                            }),\r\n                    ],\r\n                });\r\n            });\r\n            pc.addEventListener(\"track\", function (e) {\r\n                trace({\r\n                    data: [\r\n                        \"ontrack\",\r\n                        id,\r\n                        e.track.kind +\r\n                            \":\" +\r\n                            e.track.id +\r\n                            \" \" +\r\n                            e.streams.map(function (stream) {\r\n                                return \"stream:\" + stream.id;\r\n                            }),\r\n                    ],\r\n                });\r\n            });\r\n            pc.addEventListener(\"removestream\", function (e) {\r\n                trace({\r\n                    data: [\r\n                        \"onremovestream\",\r\n                        id,\r\n                        e.stream.id +\r\n                            \" \" +\r\n                            e.stream.getTracks().map(function (t) {\r\n                                return t.kind + \":\" + t.id;\r\n                            }),\r\n                    ],\r\n                });\r\n            });\r\n            pc.addEventListener(\"signalingstatechange\", function () {\r\n                if (openChannels[id] && !openChannels[id].validConnection) {\r\n                    openChannels[id].validConnection = true;\r\n                    setTimeout(function () {\r\n                        maybeOpenWebsocketConnection({ forceRecreate: true, pcId: id });\r\n                    }, 5000);\r\n                }\r\n                else {\r\n                    debugLog(\"info\", \"signalingstatechage. WS connection opening not triggered - peer connection not in channels or was already opened [\".concat(id, \"]\"), { openChannels: JSON.stringify(openChannels) });\r\n                }\r\n                trace({ data: [\"onsignalingstatechange\", id, pc.signalingState] });\r\n            });\r\n            pc.addEventListener(\"iceconnectionstatechange\", function () {\r\n                trace({ data: [\"oniceconnectionstatechange\", id, pc.iceConnectionState] });\r\n            });\r\n            pc.addEventListener(\"icegatheringstatechange\", function () {\r\n                trace({ data: [\"onicegatheringstatechange\", id, pc.iceGatheringState] });\r\n            });\r\n            pc.addEventListener(\"connectionstatechange\", function () {\r\n                trace({ data: [\"onconnectionstatechange\", id, pc.connectionState] });\r\n            });\r\n            pc.addEventListener(\"negotiationneeded\", function () {\r\n                trace({ data: [\"onnegotiationneeded\", id, undefined] });\r\n            });\r\n            pc.addEventListener(\"datachannel\", function (event) {\r\n                trace({ data: [\"ondatachannel\", id, [event.channel.id, event.channel.label]] });\r\n            });\r\n            // https://redmine.testrtc.com/issues/6529\r\n            // pc.addEventListener(\"iceconnectionstatechange\", () => {\r\n            //   if (pc.iceConnectionState === \"connected\") {\r\n            //     getStats(openChannels[id]);\r\n            //   }\r\n            // });\r\n            return pc;\r\n        };\r\n        if (\"HTMLMediaElement\" in window && \"setSinkId\" in HTMLMediaElement.prototype) {\r\n            var nativeMethod_1 = HTMLMediaElement.prototype.setSinkId;\r\n            HTMLMediaElement.prototype.setSinkId = function () {\r\n                var selectedDeviceId = arguments[0];\r\n                navigator.mediaDevices\r\n                    .enumerateDevices()\r\n                    .then(function (devices) {\r\n                    var currentDevice = devices.find(function (_a) {\r\n                        var deviceId = _a.deviceId;\r\n                        return deviceId === selectedDeviceId;\r\n                    });\r\n                    if (currentDevice && currentDevice.deviceId !== currentAudioOutputId) {\r\n                        trace({ data: [\"audioOutputChange\", null, currentDevice.label] });\r\n                    }\r\n                    currentAudioOutputId = selectedDeviceId;\r\n                })\r\n                    .catch(function (error) {\r\n                    debugLog(\"error\", error.message, { error: error });\r\n                });\r\n                return nativeMethod_1.apply(this, arguments);\r\n            };\r\n        }\r\n        // wrap RTCRtpSender.setParameters\r\n        if (\"RTCRtpSender\" in window && \"setParameters\" in window.RTCRtpSender.prototype) {\r\n            var origRTCRtpSender = window.RTCRtpSender;\r\n            var nativeMethod_2 = origRTCRtpSender.prototype.setParameters;\r\n            origRTCRtpSender.prototype.setParameters = function () {\r\n                trace({ data: [\"setParameters\", this.__pcId, arguments] });\r\n                return nativeMethod_2.apply(this, arguments);\r\n            };\r\n        }\r\n        // adding pc id to sender for above logic\r\n        [\"addTransceiver\"].forEach(function (method) {\r\n            var nativeMethod = origPeerConnection.prototype[method];\r\n            if (nativeMethod) {\r\n                origPeerConnection.prototype[method] = function () {\r\n                    var streams = \"\";\r\n                    if (arguments[1] && arguments[1].streams) {\r\n                        streams = arguments[1].streams.map(function (s) { return \"stream:\" + s.id; }).join(\";\");\r\n                    }\r\n                    var trackOrKind = typeof arguments[0] === \"string\" ? arguments[0] : arguments[0].kind + \":\" + arguments[0].id;\r\n                    var init = arguments[1] ? __assign(__assign({}, arguments[1]), { streams: streams }) : null;\r\n                    trace({ data: [method, this.__rtcStatsId, [trackOrKind, init]] });\r\n                    var transceiver = nativeMethod.apply(this, arguments);\r\n                    transceiver.sender.__pcId = this.__rtcStatsId;\r\n                    return transceiver;\r\n                };\r\n            }\r\n        });\r\n        [\"createDataChannel\"].forEach(function (method) {\r\n            var nativeMethod = origPeerConnection.prototype[method];\r\n            if (nativeMethod) {\r\n                origPeerConnection.prototype[method] = function () {\r\n                    trace({ data: [method, this.__rtcStatsId, arguments] });\r\n                    return nativeMethod.apply(this, arguments);\r\n                };\r\n            }\r\n        });\r\n        [\"close\"].forEach(function (method) {\r\n            var nativeMethod = origPeerConnection.prototype[method];\r\n            if (nativeMethod) {\r\n                origPeerConnection.prototype[method] = function () {\r\n                    trace({ data: [method, this.__rtcStatsId, arguments] });\r\n                    delete openChannels[this.__rtcStatsId];\r\n                    isManualDisconnect = true;\r\n                    debugLog(\"info\", \"on RTCPeerConnection(\".concat(this.__rtcStatsId, \") close\"));\r\n                    return nativeMethod.apply(this, arguments);\r\n                };\r\n            }\r\n        });\r\n        [\"addStream\", \"removeStream\"].forEach(function (method) {\r\n            var nativeMethod = origPeerConnection.prototype[method];\r\n            if (nativeMethod) {\r\n                origPeerConnection.prototype[method] = function () {\r\n                    var stream = arguments[0];\r\n                    var streamInfo = stream\r\n                        .getTracks()\r\n                        .map(function (t) {\r\n                        return t.kind + \":\" + t.id;\r\n                    })\r\n                        .join(\",\");\r\n                    trace({ data: [method, this.__rtcStatsId, stream.id + \" \" + streamInfo] });\r\n                    return nativeMethod.apply(this, arguments);\r\n                };\r\n            }\r\n        });\r\n        [\"addTrack\"].forEach(function (method) {\r\n            var nativeMethod = origPeerConnection.prototype[method];\r\n            if (nativeMethod) {\r\n                origPeerConnection.prototype[method] = function () {\r\n                    var track = arguments[0];\r\n                    var streams = [].slice.call(arguments, 1);\r\n                    trace({\r\n                        data: [\r\n                            method,\r\n                            this.__rtcStatsId,\r\n                            track.kind +\r\n                                \":\" +\r\n                                track.id +\r\n                                \" \" +\r\n                                (streams\r\n                                    .map(function (s) {\r\n                                    return \"stream:\" + s.id;\r\n                                })\r\n                                    .join(\";\") || \"-\"),\r\n                        ],\r\n                    });\r\n                    return nativeMethod.apply(this, arguments);\r\n                };\r\n            }\r\n        });\r\n        [\"removeTrack\"].forEach(function (method) {\r\n            var nativeMethod = origPeerConnection.prototype[method];\r\n            if (nativeMethod) {\r\n                origPeerConnection.prototype[method] = function () {\r\n                    var track = arguments[0].track;\r\n                    trace({ data: [method, this.__rtcStatsId, track ? track.kind + \":\" + track.id : \"null\"] });\r\n                    return nativeMethod.apply(this, arguments);\r\n                };\r\n            }\r\n        });\r\n        [\"createOffer\", \"createAnswer\"].forEach(function (method) {\r\n            var nativeMethod = origPeerConnection.prototype[method];\r\n            if (nativeMethod) {\r\n                origPeerConnection.prototype[method] = function () {\r\n                    var rtcStatsId = this.__rtcStatsId;\r\n                    var args = arguments;\r\n                    var opts;\r\n                    if (arguments.length === 1 && typeof arguments[0] === \"object\") {\r\n                        opts = arguments[0];\r\n                    }\r\n                    else if (arguments.length === 3 && typeof arguments[2] === \"object\") {\r\n                        opts = arguments[2];\r\n                    }\r\n                    trace({ data: [method, this.__rtcStatsId, opts] });\r\n                    return nativeMethod.apply(this, opts ? [opts] : undefined).then(function (description) {\r\n                        trace({ data: [method + \"OnSuccess\", rtcStatsId, description] });\r\n                        if (args.length > 0 && typeof args[0] === \"function\") {\r\n                            args[0].apply(null, [description]);\r\n                            return undefined;\r\n                        }\r\n                        return description;\r\n                    }, function (err) {\r\n                        trace({ data: [method + \"OnFailure\", rtcStatsId, err.toString()] });\r\n                        if (args.length > 1 && typeof args[1] === \"function\") {\r\n                            args[1].apply(null, [err]);\r\n                            return;\r\n                        }\r\n                        throw err;\r\n                    });\r\n                };\r\n            }\r\n        });\r\n        [\"setLocalDescription\", \"setRemoteDescription\", \"addIceCandidate\"].forEach(function (method) {\r\n            var nativeMethod = origPeerConnection.prototype[method];\r\n            if (nativeMethod) {\r\n                origPeerConnection.prototype[method] = function () {\r\n                    var rtcStatsId = this.__rtcStatsId;\r\n                    var args = arguments;\r\n                    var _this = this;\r\n                    // because of setLocalDescription(null) sometimes we don't have SDP value\r\n                    // fippo suggested: Access pc.localDescription.sdp in the successcallback\r\n                    var needToHandleSDPInSuccessCallback = method === \"setLocalDescription\" && (!args[0] || (args[0] && !args[0].sdp));\r\n                    trace({\r\n                        data: [method, this.__rtcStatsId, needToHandleSDPInSuccessCallback ? { parameterless: true } : args[0]],\r\n                    });\r\n                    return nativeMethod.apply(this, [args[0]]).then(function () {\r\n                        trace({\r\n                            data: [\r\n                                method + \"OnSuccess\",\r\n                                rtcStatsId,\r\n                                needToHandleSDPInSuccessCallback ? _this === null || _this === void 0 ? void 0 : _this.localDescription : undefined,\r\n                            ],\r\n                        });\r\n                        if (args.length >= 2 && typeof args[1] === \"function\") {\r\n                            args[1].apply(null, []);\r\n                            return undefined;\r\n                        }\r\n                        return undefined;\r\n                    }, function (err) {\r\n                        trace({ data: [method + \"OnFailure\", rtcStatsId, err.toString()] });\r\n                        if (args.length >= 3 && typeof args[2] === \"function\") {\r\n                            args[2].apply(null, [err]);\r\n                            return undefined;\r\n                        }\r\n                        throw err;\r\n                    });\r\n                };\r\n            }\r\n        });\r\n        // wrap static methods. Currently just generateCertificate.\r\n        if (origPeerConnection.generateCertificate) {\r\n            Object.defineProperty(peerconnection, \"generateCertificate\", {\r\n                get: function () {\r\n                    return arguments.length\r\n                        ? origPeerConnection.generateCertificate.apply(null, arguments)\r\n                        : origPeerConnection.generateCertificate;\r\n                },\r\n            });\r\n        }\r\n        window[prefix + \"RTCPeerConnection\"] = peerconnection;\r\n        window[prefix + \"RTCPeerConnection\"].prototype = origPeerConnection.prototype;\r\n    });\r\n    // getUserMedia wrappers\r\n    prefixesToWrap.forEach(function (prefix) {\r\n        var name = prefix + (prefix.length ? \"GetUserMedia\" : \"getUserMedia\");\r\n        if (!navigator[name]) {\r\n            return;\r\n        }\r\n        var origGetUserMedia = navigator[name].bind(navigator);\r\n        var gum = function () {\r\n            trace({ data: [\"getUserMedia\", null, arguments[0]] });\r\n            var cb = arguments[1];\r\n            var eb = arguments[2];\r\n            origGetUserMedia(arguments[0], function (stream) {\r\n                // we log the stream id, track ids and tracks readystate since that is ended GUM fails\r\n                // to acquire the cam (in chrome)\r\n                trace({ data: [\"getUserMediaOnSuccess\", null, (0, utils_1.dumpStream)(stream)] });\r\n                if (cb) {\r\n                    cb(stream);\r\n                }\r\n            }, function (err) {\r\n                var errorData = [\"getUserMediaOnFailure\", null, err.name];\r\n                trace({ data: errorData });\r\n                httpReportError(errorData);\r\n                if (eb) {\r\n                    eb(err);\r\n                }\r\n            });\r\n        };\r\n        navigator[name] = gum.bind(navigator);\r\n    });\r\n    if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\r\n        var origGetUserMedia_1 = navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);\r\n        var gum = function () {\r\n            trace({ data: [\"navigator.mediaDevices.getUserMedia\", null, arguments[0]] });\r\n            return origGetUserMedia_1.apply(navigator.mediaDevices, arguments).then(function (stream) {\r\n                trace({ data: [\"navigator.mediaDevices.getUserMediaOnSuccess\", null, (0, utils_1.dumpStream)(stream)] });\r\n                return stream;\r\n            }, function (err) {\r\n                var errorData = [\"navigator.mediaDevices.getUserMediaOnFailure\", null, err.name];\r\n                trace({ data: errorData });\r\n                httpReportError(errorData);\r\n                return Promise.reject(err);\r\n            });\r\n        };\r\n        navigator.mediaDevices.getUserMedia = gum.bind(navigator.mediaDevices);\r\n    }\r\n    // getDisplayMedia\r\n    if (navigator.mediaDevices && navigator.mediaDevices.getDisplayMedia) {\r\n        var origGetDisplayMedia_1 = navigator.mediaDevices.getDisplayMedia.bind(navigator.mediaDevices);\r\n        var gdm = function () {\r\n            trace({ data: [\"navigator.mediaDevices.getDisplayMedia\", null, arguments[0]] });\r\n            return origGetDisplayMedia_1.apply(navigator.mediaDevices, arguments).then(function (stream) {\r\n                trace({ data: [\"navigator.mediaDevices.getDisplayMediaOnSuccess\", null, (0, utils_1.dumpStream)(stream)] });\r\n                return stream;\r\n            }, function (err) {\r\n                var errorData = [\"navigator.mediaDevices.getDisplayMediaOnFailure\", null, err.name];\r\n                trace({ data: errorData });\r\n                httpReportError(errorData);\r\n                return Promise.reject(err);\r\n            });\r\n        };\r\n        navigator.mediaDevices.getDisplayMedia = gdm.bind(navigator.mediaDevices);\r\n    }\r\n    if ((_a = watchrtc.console) === null || _a === void 0 ? void 0 : _a.level) {\r\n        (0, utils_1.setConsoleLevel)(watchrtc.console.level, trace);\r\n    }\r\n};\r\nexports.initSDK = initSDK;\r\nvar setConfig = function (newWatchrtcConfig) {\r\n    var _a;\r\n    var initialized = window.watchRTCInitialized;\r\n    if (!initialized) {\r\n        console.info.apply(console, __spreadArray(__spreadArray([], (0, utils_1.logPrefix)(\"error\"), false), [\"SDK is not initialized. Use 'init' function fisrt.\"], false));\r\n        return;\r\n    }\r\n    var collectConsoleDisabled = (watchrtcConfig === null || watchrtcConfig === void 0 ? void 0 : watchrtcConfig.allowBrowserLogCollection) === false;\r\n    if (!collectConsoleDisabled && ((_a = newWatchrtcConfig === null || newWatchrtcConfig === void 0 ? void 0 : newWatchrtcConfig.console) === null || _a === void 0 ? void 0 : _a.override) === true && newWatchrtcConfig.console.level) {\r\n        (0, utils_1.setConsoleLevel)(newWatchrtcConfig.console.level, trace);\r\n    }\r\n    watchrtcConfig = __assign(__assign({}, watchrtcConfig), newWatchrtcConfig);\r\n    watchrtcIdentifiers.rtcRoomId = watchrtcConfig.rtcRoomId;\r\n    watchrtcIdentifiers.rtcPeerId = watchrtcConfig.rtcPeerId;\r\n    debugLog(\"info\", \"setConfig\", { newWatchrtcConfig: newWatchrtcConfig, watchrtcConfig: watchrtcConfig });\r\n    maybeOpenWebsocketConnection({});\r\n};\r\nexports.setConfig = setConfig;\r\n/**\r\n * Set user rating and/or comment for peer session\r\n * @param rating number from 1 to 5\r\n * @param comment string\r\n */\r\nvar setUserRating = function (\r\n/** 1 | 2 | 3 | 4 | 5 */\r\nrating, ratingComment) {\r\n    var _a;\r\n    var initialized = window.watchRTCInitialized;\r\n    if (!initialized) {\r\n        console.info.apply(console, __spreadArray(__spreadArray([], (0, utils_1.logPrefix)(\"error\"), false), [\"SDK is not initialized. Use 'init' function fisrt.\"], false));\r\n        return Promise.resolve({ error: \"SDK is not initialized. Use 'init' function fisrt.\" });\r\n    }\r\n    var isValidRating = (0, utils_1.validateRating)(rating);\r\n    if (!isValidRating) {\r\n        return Promise.resolve({ error: \"Rating is invalid\" });\r\n    }\r\n    var opened = ((_a = socket === null || socket === void 0 ? void 0 : socket.connection) === null || _a === void 0 ? void 0 : _a.readyState) === WebSocket.OPEN;\r\n    var data = [\"userRating\", null, { rating: rating, ratingComment: ratingComment }];\r\n    return new Promise(function (resolve, reject) {\r\n        var options = { promiseFuncs: { resolve: resolve, reject: reject } };\r\n        if (opened) {\r\n            trace({ data: data, options: options });\r\n        }\r\n        else {\r\n            httpTrace.apply(void 0, data).then(function () { return resolve({}); })\r\n                .catch(function (error) { return resolve({ error: error }); });\r\n        }\r\n    });\r\n};\r\nexports.setUserRating = setUserRating;\r\n/**\r\n * Add keys for peer session\r\n * @param keys\r\n */\r\nvar addKeys = function (\r\n/** { \"key1\": \"value1\", \"key2\": [\"value2_1\", \"value2_2\"]} */\r\nkeys) {\r\n    var _a;\r\n    var initialized = window.watchRTCInitialized;\r\n    if (!initialized) {\r\n        console.info.apply(console, __spreadArray(__spreadArray([], (0, utils_1.logPrefix)(\"error\"), false), [\"SDK is not initialized. Use 'init' function fisrt.\"], false));\r\n        return;\r\n    }\r\n    Object.keys(keys || {}).forEach(function (k) {\r\n        if (typeof keys[k] === \"string\") {\r\n            keys[k] = [keys[k]];\r\n        }\r\n    });\r\n    var data = [\"keys\", null, keys];\r\n    var opened = ((_a = socket === null || socket === void 0 ? void 0 : socket.connection) === null || _a === void 0 ? void 0 : _a.readyState) === WebSocket.OPEN;\r\n    var wasConnected = socket === null || socket === void 0 ? void 0 : socket.wasConnected;\r\n    return new Promise(function (resolve, reject) {\r\n        var options = { promiseFuncs: { resolve: resolve, reject: reject } };\r\n        if (opened) {\r\n            trace({ data: data, options: options });\r\n        }\r\n        else if (!wasConnected) {\r\n            trace({ data: data, options: options });\r\n        }\r\n        else {\r\n            httpTrace.apply(void 0, data).then(function () { return resolve({}); })\r\n                .catch(function (error) { return resolve({ error: error }); });\r\n        }\r\n    });\r\n};\r\nexports.addKeys = addKeys;\r\nvar disableDataCollection = function () {\r\n    var initialized = window.watchRTCInitialized;\r\n    if (!initialized) {\r\n        console.info.apply(console, __spreadArray(__spreadArray([], (0, utils_1.logPrefix)(\"error\"), false), [\"SDK is not initialized. Use 'init' function fisrt.\"], false));\r\n        return;\r\n    }\r\n    socket === null || socket === void 0 ? void 0 : socket.disableDataCollection();\r\n};\r\nexports.disableDataCollection = disableDataCollection;\r\nvar enableDataCollection = function () {\r\n    var initialized = window.watchRTCInitialized;\r\n    if (!initialized) {\r\n        console.info.apply(console, __spreadArray(__spreadArray([], (0, utils_1.logPrefix)(\"error\"), false), [\"SDK is not initialized. Use 'init' function fisrt.\"], false));\r\n        return;\r\n    }\r\n    socket === null || socket === void 0 ? void 0 : socket.enableDataCollection();\r\n};\r\nexports.enableDataCollection = enableDataCollection;\r\nvar addEvent = function (event) {\r\n    var initialized = window.watchRTCInitialized;\r\n    if (!initialized) {\r\n        console.info.apply(console, __spreadArray(__spreadArray([], (0, utils_1.logPrefix)(\"error\"), false), [\"addEvent error. SDK is not initialized. Use 'init' function fisrt.\"], false));\r\n        return;\r\n    }\r\n    // const opened = socket?.connection?.readyState === WebSocket.OPEN;\r\n    // if (!opened && socket?.wasConnected) {\r\n    //   console.info(...logPrefix(\"error\"), `addEvent error. Connection has been closed.`);\r\n    //   return;\r\n    // }\r\n    var isEventValid = (0, utils_1.validateEvent)(event);\r\n    if (!isEventValid) {\r\n        return;\r\n    }\r\n    var data = [\"event\", null, event];\r\n    return new Promise(function (resolve, reject) {\r\n        var options = { promiseFuncs: { resolve: resolve, reject: reject } };\r\n        trace({ data: data, options: options });\r\n    });\r\n};\r\nexports.addEvent = addEvent;\r\nvar mapStream = function (id, name) {\r\n    var initialized = window.watchRTCInitialized;\r\n    if (!initialized) {\r\n        console.info.apply(console, __spreadArray(__spreadArray([], (0, utils_1.logPrefix)(\"error\"), false), [\"mapStream error. SDK is not initialized. Use 'init' function fisrt.\"], false));\r\n        return;\r\n    }\r\n    var isDataValid = !!id && !!name;\r\n    if (!isDataValid) {\r\n        return;\r\n    }\r\n    var data = [\"mapStream\", null, { id: id, name: name }];\r\n    trace({ data: data });\r\n};\r\nexports.mapStream = mapStream;\r\nvar connect = function () {\r\n    var initialized = window.watchRTCInitialized;\r\n    if (!initialized) {\r\n        console.info.apply(console, __spreadArray(__spreadArray([], (0, utils_1.logPrefix)(\"error\"), false), [\"connect error. SDK is not initialized. Use 'init' function fisrt.\"], false));\r\n        return;\r\n    }\r\n    isManualConnect = true;\r\n    debugLog(\"info\", \"manual connect\");\r\n    maybeOpenWebsocketConnection({});\r\n};\r\nexports.connect = connect;\r\nvar disconnect = function () {\r\n    var initialized = window.watchRTCInitialized;\r\n    if (!initialized) {\r\n        console.info.apply(console, __spreadArray(__spreadArray([], (0, utils_1.logPrefix)(\"error\"), false), [\"disconnect error. SDK is not initialized. Use 'init' function fisrt.\"], false));\r\n        return;\r\n    }\r\n    isManualConnect = false;\r\n    isManualDisconnect = true;\r\n    socket === null || socket === void 0 ? void 0 : socket.close();\r\n    debugLog(\"info\", \"manual disconnect\");\r\n};\r\nexports.disconnect = disconnect;\r\nvar registerOnStatsListener = function (listener) {\r\n    getStatsCallback = listener;\r\n};\r\nexports.registerOnStatsListener = registerOnStatsListener;\r\nvar httpTrace = function () {\r\n    var _a;\r\n    var data = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        data[_i] = arguments[_i];\r\n    }\r\n    if (!watchrtcIdentifiers.rtcRoomId || !watchrtcIdentifiers.rtcPeerId) {\r\n        var message = \"Cannot do http without room and peer ids\";\r\n        console.log.apply(console, __spreadArray(__spreadArray([], (0, utils_1.logPrefix)(\"info\"), false), [message], false));\r\n        return Promise.reject(message);\r\n    }\r\n    if (!watchrtcIdentifiers.projectId && !watchrtcConfig.rtcApiKey) {\r\n        var message = \"Missing apiKey to enable trace before connection establishment\";\r\n        console.log.apply(console, __spreadArray(__spreadArray([], (0, utils_1.logPrefix)(\"info\"), false), [message], false));\r\n        return Promise.reject(message);\r\n    }\r\n    var httpConnectionData = (0, utils_1.getConnectionData)(\"http\", watchrtcConfig.rtcApiKey, watchrtcConfig.proxyUrl);\r\n    return http\r\n        ? http.trace.apply(http, __spreadArray([\"\".concat(httpConnectionData.url, \"/trace\"), (_a = watchrtcIdentifiers.projectId) !== null && _a !== void 0 ? _a : httpConnectionData.key, watchrtcIdentifiers.rtcRoomId,\r\n            watchrtcIdentifiers.rtcPeerId], data, false)) : Promise.reject(\"Invalid configuration of http service\");\r\n};\r\nvar httpReportError = function (data) {\r\n    var apiKey = watchrtcConfig === null || watchrtcConfig === void 0 ? void 0 : watchrtcConfig.rtcApiKey;\r\n    var rtcRoomId = watchrtcConfig === null || watchrtcConfig === void 0 ? void 0 : watchrtcConfig.rtcRoomId;\r\n    var rtcPeerId = watchrtcConfig === null || watchrtcConfig === void 0 ? void 0 : watchrtcConfig.rtcPeerId;\r\n    if (!apiKey || !rtcRoomId || !rtcPeerId) {\r\n        console.log.apply(console, __spreadArray(__spreadArray([], (0, utils_1.logPrefix)(\"error\"), false), [\"Cannot report an error. Please provide apiKey, rtcRoomId and rtcPeerId \"], false));\r\n        return;\r\n    }\r\n    var httpConnectionData = (0, utils_1.getConnectionData)(\"http\", watchrtcConfig === null || watchrtcConfig === void 0 ? void 0 : watchrtcConfig.rtcApiKey, watchrtcConfig.proxyUrl);\r\n    data = data || (socket === null || socket === void 0 ? void 0 : socket.buffer) || [];\r\n    http === null || http === void 0 ? void 0 : http.trace(\"\".concat(httpConnectionData.url, \"/error\"), httpConnectionData.key, rtcRoomId, rtcPeerId, data);\r\n};\r\n// (window as any).setUserRating = setUserRating;\r\n// (window as any).addTags = addTags;\r\n// (window as any).addKeys = addKeys;\r\n// (window as any).init = initSDK;\r\n// (window as any).addEvent = addEvent;\r\n// (window as any).wrtcConnect = connect;\r\n// (window as any).wrtcDisconnect = disconnect;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.getStreamsFromStats = exports.getTransportFromStats = void 0;\r\nvar getTransportFromStats = function (id, reports) {\r\n    if (!reports) {\r\n        return null;\r\n    }\r\n    var reportKeys = Object.keys(reports);\r\n    var keyPairs = reportKeys.filter(function (reportKey) { return reports[reportKey].type === \"candidate-pair\" && reports[reportKey].nominated; });\r\n    if (keyPairs.length > 0) {\r\n        var _a = reports[keyPairs[0]], localCandidateId_1 = _a.localCandidateId, remoteCandidateId_1 = _a.remoteCandidateId;\r\n        var localCandidateKey = reportKeys.find(function (reportKey) { return reports[reportKey].type === \"local-candidate\" && reports[reportKey].id === localCandidateId_1; });\r\n        var remoteCandidateKey = reportKeys.find(function (reportKey) { return reports[reportKey].type === \"remote-candidate\" && reports[reportKey].id === remoteCandidateId_1; });\r\n        if (localCandidateKey && remoteCandidateKey) {\r\n            var localCandidate = reports[localCandidateKey];\r\n            var remoteCandidate = reports[remoteCandidateKey];\r\n            var peer = {};\r\n            peer[id] = {\r\n                connection: localCandidate.candidateType === \"relay\" ? \"relay\" : \"direct\",\r\n                transport: localCandidate.candidateType === \"relay\" ? localCandidate.relayProtocol : \"udp\",\r\n                address: \"\".concat(remoteCandidate.address, \":\").concat(remoteCandidate.port),\r\n            };\r\n            return peer;\r\n        }\r\n    }\r\n    return null;\r\n};\r\nexports.getTransportFromStats = getTransportFromStats;\r\nvar getStreamsFromStats = function (id, previous, current) {\r\n    var streams = {};\r\n    var currentReportsKeys = Object.keys(current);\r\n    var streamsKeys = currentReportsKeys.filter(function (keys) { return current[keys].type === \"inbound-rtp\" || current[keys].type === \"outbound-rtp\"; });\r\n    streamsKeys.forEach(function (streamKey) {\r\n        var currentReport = current[streamKey];\r\n        var previousReport = previous && streamKey in previous ? previous[streamKey] : null;\r\n        var direction = currentReport.type === \"inbound-rtp\" ? \"inbound\" : \"outbound\";\r\n        var kind = currentReport.kind;\r\n        var currentRemoteReport = currentReport.remoteId in current ? current[currentReport.remoteId] : null;\r\n        var previousRemoteReport = previousReport && previousReport.remoteId in previous ? previous[previousReport.remoteId] : null;\r\n        var deltaSeconds = previousReport ? (currentReport.timestamp - previousReport.timestamp) / 1000 : null;\r\n        var stream = {\r\n            direction: direction,\r\n            kind: kind,\r\n            peerId: id,\r\n        };\r\n        // Specific video (in inbound, outbound\r\n        if (kind === \"video\") {\r\n            stream.frameWidth = currentReport.frameWidth;\r\n            stream.frameHeight = currentReport.frameHeight;\r\n            stream.framerate = currentReport.framesPerSecond;\r\n        }\r\n        if (currentReport.type === \"inbound-rtp\") {\r\n            stream.jitter = currentReport.jitter;\r\n            // Compute intermediate values if previous report exists\r\n            stream.bytesReceived = previousReport ? currentReport.bytesReceived - previousReport.bytesReceived : null;\r\n            stream.packetsReceived = previousReport ? currentReport.packetsReceived - previousReport.packetsReceived : null;\r\n            stream.packetsLost = previousReport ? currentReport.packetsLost - previousReport.packetsLost : null;\r\n            stream.packetsLoss =\r\n                stream.packetsLost + stream.packetsReceived > 0\r\n                    ? (stream.packetsLost * 100) / (stream.packetsLost + stream.packetsReceived)\r\n                    : null;\r\n            stream.bitrate = deltaSeconds ? (stream.bytesReceived * 8) / deltaSeconds : null;\r\n            // Compute intermediate stats from remoteId (remoteOutbound);\r\n            stream.roundTripTime =\r\n                currentRemoteReport && \"roundTripTime\" in currentRemoteReport ? currentRemoteReport.roundTripTime : null;\r\n        }\r\n        else {\r\n            // Compute intermediate values if previous report exists\r\n            stream.bytesSent = previousReport ? currentReport.bytesSent - previousReport.bytesSent : null;\r\n            stream.packetsSent = previousReport ? currentReport.packetsSent - previousReport.packetsSent : null;\r\n            stream.bitrate = deltaSeconds ? (stream.bytesSent * 8) / deltaSeconds : null;\r\n            // Compute intermediate stats from remoteId (remoteInbound)\r\n            stream.roundTripTime =\r\n                currentRemoteReport && \"roundTripTime\" in currentRemoteReport ? currentRemoteReport.roundTripTime : null;\r\n            stream.jitter = currentRemoteReport && \"jitter\" in currentRemoteReport ? currentRemoteReport.jitter : null;\r\n            stream.packetsLost =\r\n                currentRemoteReport && previousRemoteReport\r\n                    ? currentRemoteReport.packetsLost - previousRemoteReport.packetsLost\r\n                    : null;\r\n            stream.packetsLoss =\r\n                currentRemoteReport && \"fractionLost\" in currentRemoteReport ? currentRemoteReport.fractionLost : null;\r\n        }\r\n        streams[current[streamKey].id] = stream;\r\n    });\r\n    return streams;\r\n};\r\nexports.getStreamsFromStats = getStreamsFromStats;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n","\"use strict\";\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.applyPatchForRTT = exports.exposeApplicationStatsForPC = exports.restoreOriginalConsoleMethods = exports.setConsoleLevel = exports.getHardwareInfo = exports.validateEvent = exports.validateRating = exports.isRoomIdOrPeerIdChanged = exports.countOfValidConnections = exports.validateConfig = exports.getConnectionData = exports.dumpStream = exports.map2obj = exports.mangleChromeStats = exports.deltaCompression = exports.debugLog = exports.logPrefix = void 0;\r\nvar GPU = require(\"./detect-gpu\");\r\nvar stats_1 = require(\"./stats\");\r\nvar logPrefix = function (type) {\r\n    if (type === void 0) { type = \"info\"; }\r\n    return type === \"error\"\r\n        ? [\r\n            \"%cwatchRTC %cERROR\",\r\n            \"background: \".concat(\"gold\", \"; color: black; padding: 2px 0.5em; border-radius: 0.5em;\"),\r\n            \"background: \".concat(\"red\", \"; color: white; padding: 2px 0.5em; border-radius: 0.5em;\"),\r\n        ]\r\n        : [\"%cwatchRTC\", \"background: \".concat(\"gold\", \"; color: black; padding: 2px 0.5em; border-radius: 0.5em;\")];\r\n};\r\nexports.logPrefix = logPrefix;\r\nvar debugLog = function (getDebugStatus, prefix, message, object) {\r\n    var isDebugEnabled = getDebugStatus();\r\n    if (!isDebugEnabled) {\r\n        return;\r\n    }\r\n    var logArgs = __spreadArray(__spreadArray([], (0, exports.logPrefix)(prefix), true), [message], false);\r\n    if (object) {\r\n        logArgs.push(object);\r\n    }\r\n    console.log.apply(console, logArgs);\r\n};\r\nexports.debugLog = debugLog;\r\n// apply a delta compression to the stats report. Reduces size by ~90%.\r\n// To reduce further, report keys could be compressed.\r\n// Muly: maybe can improve using https://github.com/AsyncBanana/microdiff?utm_source=tldrnewsletter\r\nvar deltaCompression = function (oldStats, newStats, debug) {\r\n    oldStats = oldStats || {};\r\n    newStats = newStats || {};\r\n    newStats = JSON.parse(JSON.stringify(newStats));\r\n    (0, exports.debugLog)(function () { return debug; }, \"info\", \"deltaCompression\", { oldStats: oldStats, newStats: newStats });\r\n    Object.keys(newStats).forEach(function (id) {\r\n        var report = newStats[id];\r\n        delete report.id;\r\n        if (!oldStats[id]) {\r\n            return;\r\n        }\r\n        Object.keys(report).forEach(function (name) {\r\n            if (report.timestamp && typeof report.timestamp === \"string\") {\r\n                report.timestamp = new Date(report.timestamp).getTime();\r\n            }\r\n            if (report[name] === oldStats[id][name]) {\r\n                delete newStats[id][name];\r\n            }\r\n            else if (Array.isArray(report[name])) {\r\n                // Arrays get serialized if anything changed.\r\n                if (JSON.stringify(report[name]) === JSON.stringify(oldStats[id][name])) {\r\n                    delete newStats[id][name];\r\n                }\r\n            }\r\n            if (Object.keys(report).length === 0) {\r\n                delete newStats[id];\r\n            }\r\n            else if (Object.keys(report).length === 1 && report.timestamp) {\r\n                delete newStats[id];\r\n            }\r\n        });\r\n    });\r\n    var timestamp = -Infinity;\r\n    Object.keys(newStats).forEach(function (id) {\r\n        var report = newStats[id];\r\n        if (report.timestamp > timestamp) {\r\n            timestamp = report.timestamp;\r\n        }\r\n    });\r\n    Object.keys(newStats).forEach(function (id) {\r\n        var report = newStats[id];\r\n        if (report.timestamp === timestamp) {\r\n            report.timestamp = 0;\r\n        }\r\n    });\r\n    newStats.timestamp = timestamp;\r\n    return newStats;\r\n};\r\nexports.deltaCompression = deltaCompression;\r\nvar mangleChromeStats = function (pc, response) {\r\n    var standardReport = {};\r\n    var reports = response.result();\r\n    reports.forEach(function (report) {\r\n        var standardStats = {\r\n            id: report.id,\r\n            timestamp: report.timestamp.getTime(),\r\n            type: report.type,\r\n        };\r\n        report.names().forEach(function (name) {\r\n            standardStats[name] = report.stat(name);\r\n        });\r\n        standardReport[standardStats.id] = standardStats;\r\n    });\r\n    return standardReport;\r\n};\r\nexports.mangleChromeStats = mangleChromeStats;\r\n// transforms a maplike to an object. Mostly for getStats +\r\n// JSON.parse(JSON.stringify())\r\nvar map2obj = function (m) {\r\n    if (!m.entries) {\r\n        return m;\r\n    }\r\n    var o = {};\r\n    m.forEach(function (v, k) {\r\n        o[k] = v;\r\n    });\r\n    return o;\r\n};\r\nexports.map2obj = map2obj;\r\nvar dumpStream = function (stream) {\r\n    return {\r\n        id: stream.id,\r\n        tracks: stream.getTracks().map(function (track) {\r\n            return {\r\n                id: track.id,\r\n                kind: track.kind,\r\n                label: track.label,\r\n                enabled: track.enabled,\r\n                muted: track.muted,\r\n                readyState: track.readyState, // `live` or `ended`\r\n            };\r\n        }),\r\n    };\r\n};\r\nexports.dumpStream = dumpStream;\r\nvar getConnectionData = function (type, key, proxyURL) {\r\n    var localUrl = \"\".concat(type == \"ws\" ? \"ws\" : \"http\", \"://localhost:9101\");\r\n    var staging1Url = \"\".concat(type == \"ws\" ? \"wss\" : \"https\", \"://watchrtc-staging1.testrtc.com\");\r\n    var staging2Url = \"\".concat(type == \"ws\" ? \"wss\" : \"https\", \"://watchrtc-staging2.testrtc.com\");\r\n    var productionUrl = \"\".concat(type == \"ws\" ? \"wss\" : \"https\", \"://watchrtc.testrtc.com\");\r\n    var production1Url = \"\".concat(type == \"ws\" ? \"wss\" : \"https\", \"://watchrtc-app1.testrtc.com\");\r\n    if (proxyURL && type === \"http\") {\r\n        if (proxyURL.includes(\"wss://\")) {\r\n            proxyURL = proxyURL.replace(\"wss://\", \"https://\");\r\n        }\r\n        else {\r\n            proxyURL = proxyURL.replace(\"ws://\", \"http://\");\r\n        }\r\n    }\r\n    var splitted = key.split(\":\");\r\n    if (key.indexOf(\"local\") !== -1) {\r\n        return {\r\n            url: proxyURL || localUrl,\r\n            key: splitted[1],\r\n        };\r\n    }\r\n    else if (key.indexOf(\"staging1\") !== -1) {\r\n        return {\r\n            url: proxyURL || staging1Url,\r\n            key: splitted[1],\r\n        };\r\n    }\r\n    else if (key.indexOf(\"staging\") !== -1) {\r\n        return {\r\n            url: proxyURL || staging2Url,\r\n            key: splitted[1],\r\n        };\r\n    }\r\n    else if (key.indexOf(\"production1\") !== -1) {\r\n        return {\r\n            url: proxyURL || production1Url,\r\n            key: splitted[1],\r\n        };\r\n    }\r\n    else if (key.indexOf(\"production\") !== -1) {\r\n        return {\r\n            url: proxyURL || productionUrl,\r\n            key: splitted[1],\r\n        };\r\n    }\r\n    else {\r\n        return {\r\n            url: proxyURL || productionUrl,\r\n            key: splitted[0],\r\n        };\r\n    }\r\n};\r\nexports.getConnectionData = getConnectionData;\r\nvar validateConfig = function (config) {\r\n    if (!(config === null || config === void 0 ? void 0 : config.rtcApiKey)) {\r\n        if (config === null || config === void 0 ? void 0 : config.debug) {\r\n            console.info.apply(console, __spreadArray(__spreadArray([], (0, exports.logPrefix)(\"error\"), false), [\"config.rtcApiKey or config.rtcToken need to be provided.\"], false));\r\n            return false;\r\n        }\r\n    }\r\n    if (!(config === null || config === void 0 ? void 0 : config.rtcRoomId) || !(config === null || config === void 0 ? void 0 : config.rtcPeerId)) {\r\n        if (config === null || config === void 0 ? void 0 : config.debug) {\r\n            console.info.apply(console, __spreadArray(__spreadArray([], (0, exports.logPrefix)(\"info\"), false), [\"config.rtcRoomId or config.rtcPeerId is empty.\"], false));\r\n        }\r\n        return false;\r\n    }\r\n    return true;\r\n};\r\nexports.validateConfig = validateConfig;\r\nvar countOfValidConnections = function (openChannels) {\r\n    return Object.keys(openChannels).filter(function (id) { return openChannels[id].validConnection; }).length;\r\n};\r\nexports.countOfValidConnections = countOfValidConnections;\r\nvar isRoomIdOrPeerIdChanged = function (watchrtcIdentifiers, watchrtcConfig) {\r\n    var changed = false;\r\n    if (watchrtcConfig.rtcRoomId &&\r\n        watchrtcIdentifiers.rtcRoomId &&\r\n        watchrtcIdentifiers.rtcRoomId !== watchrtcConfig.rtcRoomId) {\r\n        changed = true;\r\n    }\r\n    if (watchrtcConfig.rtcPeerId &&\r\n        watchrtcIdentifiers.rtcPeerId &&\r\n        watchrtcIdentifiers.rtcPeerId !== watchrtcConfig.rtcPeerId) {\r\n        changed = true;\r\n    }\r\n    if (changed && watchrtcConfig.debug) {\r\n        console.log.apply(console, __spreadArray(__spreadArray([], (0, exports.logPrefix)(\"info\"), false), [\"maybeOpenWebsocketConnection. rtcRoomId or rtcPeerId has been changed\", {\r\n                old: {\r\n                    rtcRoomId: watchrtcIdentifiers.rtcRoomId,\r\n                    rtcPeerId: watchrtcIdentifiers.rtcPeerId,\r\n                },\r\n                new: {\r\n                    rtcRoomId: watchrtcConfig.rtcRoomId,\r\n                    rtcPeerId: watchrtcConfig.rtcPeerId,\r\n                },\r\n            }], false));\r\n    }\r\n    return changed;\r\n};\r\nexports.isRoomIdOrPeerIdChanged = isRoomIdOrPeerIdChanged;\r\nvar validateRating = function (rating) {\r\n    if (!rating) {\r\n        console.info.apply(console, __spreadArray(__spreadArray([], (0, exports.logPrefix)(\"error\"), false), [\"rating parameter is required\"], false));\r\n        return false;\r\n    }\r\n    if (typeof rating !== \"number\" || rating < 1 || rating > 5) {\r\n        console.info.apply(console, __spreadArray(__spreadArray([], (0, exports.logPrefix)(\"error\"), false), [\"rating parameter should be number from 1 to 5\"], false));\r\n        return false;\r\n    }\r\n    return true;\r\n};\r\nexports.validateRating = validateRating;\r\nvar validateEvent = function (event) {\r\n    if (!event) {\r\n        console.info.apply(console, __spreadArray(__spreadArray([], (0, exports.logPrefix)(\"error\"), false), [\"event parameter is required\"], false));\r\n        return false;\r\n    }\r\n    if (event.type !== \"global\" && event.type !== \"local\" && event.type !== \"log\") {\r\n        console.info.apply(console, __spreadArray(__spreadArray([], (0, exports.logPrefix)(\"error\"), false), [\"event.type should be either \\\"global\\\" or \\\"local\\\" or \\\"log\\\"\"], false));\r\n        return false;\r\n    }\r\n    if (event.parameters && typeof event.parameters !== \"object\") {\r\n        console.info.apply(console, __spreadArray(__spreadArray([], (0, exports.logPrefix)(\"error\"), false), [\"event.parameters should be JSON object\\\"\"], false));\r\n        return false;\r\n    }\r\n    return true;\r\n};\r\nexports.validateEvent = validateEvent;\r\nvar getHardwareInfo = function () { return __awaiter(void 0, void 0, void 0, function () {\r\n    function number_format(num) {\r\n        return (Math.round(num * 100) / 100).toFixed(2);\r\n    }\r\n    var loadBenchmarks, gpuInfo, result, memory;\r\n    return __generator(this, function (_a) {\r\n        switch (_a.label) {\r\n            case 0:\r\n                loadBenchmarks = function (fileName) { return __awaiter(void 0, void 0, void 0, function () {\r\n                    return __generator(this, function (_a) {\r\n                        switch (_a.label) {\r\n                            case 0: return [4 /*yield*/, new Promise(function (resolve) {\r\n                                    try {\r\n                                        var data = require(\"./gpu-benchmarks/\".concat(fileName));\r\n                                        data.shift();\r\n                                        return resolve(data);\r\n                                    }\r\n                                    catch (err) {\r\n                                        console.error(\"Error. getHardwareInfo. loadBenchmarks\", { err: err.stack, fileName: fileName });\r\n                                        resolve([]);\r\n                                    }\r\n                                })];\r\n                            case 1: return [2 /*return*/, _a.sent()];\r\n                        }\r\n                    });\r\n                }); };\r\n                return [4 /*yield*/, GPU.getGPUTier({\r\n                        override: { loadBenchmarks: loadBenchmarks },\r\n                    })];\r\n            case 1:\r\n                gpuInfo = _a.sent();\r\n                result = __assign(__assign({}, gpuInfo), { cores_count: window.navigator.hardwareConcurrency });\r\n                memory = window.performance[\"memory\"];\r\n                if (memory) {\r\n                    result.jsHeapSizeLimit = number_format(memory.jsHeapSizeLimit / 1048576);\r\n                    result.totalJSHeapSize = number_format(memory.totalJSHeapSize / 1048576);\r\n                    result.usedJSHeapSize = number_format(memory.usedJSHeapSize / 1048576);\r\n                }\r\n                return [2 /*return*/, result];\r\n        }\r\n    });\r\n}); };\r\nexports.getHardwareInfo = getHardwareInfo;\r\nvar patchConsoleConfig = {\r\n    originalMethodPrefix: \"_original_\",\r\n    methodsToPatch: [\"log\", \"debug\", \"info\", \"warn\", \"error\"],\r\n    level: \"\",\r\n};\r\nvar patchConsoleMethod = function (methodName, trace) {\r\n    var originalMethod = console[methodName];\r\n    if (!originalMethod) {\r\n        return;\r\n    }\r\n    console[patchConsoleConfig.originalMethodPrefix + methodName] = originalMethod;\r\n    console[methodName] = function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        if (patchConsoleConfig.level && args.length && trace) {\r\n            var currentMethodIndex = patchConsoleConfig.methodsToPatch.indexOf(methodName);\r\n            var configMethodIndex = patchConsoleConfig.methodsToPatch.indexOf(patchConsoleConfig.level);\r\n            var shouldTraceMethod = currentMethodIndex >= 0 && currentMethodIndex >= configMethodIndex;\r\n            if (shouldTraceMethod) {\r\n                var text = stringifyArgs(args);\r\n                trace({ data: [\"log\", null, { type: methodName, text: text }] });\r\n            }\r\n        }\r\n        originalMethod.apply(console, args);\r\n    };\r\n};\r\nvar setConsoleLevel = function (level, trace) {\r\n    if (level && patchConsoleConfig.methodsToPatch.includes(level) && level !== patchConsoleConfig.level) {\r\n        var currentIndex = patchConsoleConfig.methodsToPatch.indexOf(level);\r\n        var previousIndex = patchConsoleConfig.methodsToPatch.indexOf(patchConsoleConfig.level);\r\n        if (previousIndex < 0) {\r\n            for (var _i = 0, _a = patchConsoleConfig.methodsToPatch.slice(currentIndex); _i < _a.length; _i++) {\r\n                var methodName = _a[_i];\r\n                patchConsoleMethod(methodName, trace);\r\n            }\r\n        }\r\n        else if (currentIndex < previousIndex) {\r\n            for (var _b = 0, _c = patchConsoleConfig.methodsToPatch.slice(currentIndex, previousIndex); _b < _c.length; _b++) {\r\n                var methodName = _c[_b];\r\n                patchConsoleMethod(methodName, trace);\r\n            }\r\n        }\r\n        patchConsoleConfig.level = level;\r\n    }\r\n};\r\nexports.setConsoleLevel = setConsoleLevel;\r\nvar restoreOriginalConsoleMethods = function () {\r\n    if (!(\"console\" in window)) {\r\n        return;\r\n    }\r\n    for (var _i = 0, _a = patchConsoleConfig.methodsToPatch; _i < _a.length; _i++) {\r\n        var methodName = _a[_i];\r\n        var originalMethod = console[patchConsoleConfig.originalMethodPrefix + methodName];\r\n        if (!originalMethod) {\r\n            continue;\r\n        }\r\n        console[methodName] = originalMethod.bind(console);\r\n        delete console[patchConsoleConfig.originalMethodPrefix + methodName];\r\n    }\r\n};\r\nexports.restoreOriginalConsoleMethods = restoreOriginalConsoleMethods;\r\nvar exposeApplicationStatsForPC = function (id, previous, current) {\r\n    return {\r\n        peer: (0, stats_1.getTransportFromStats)(id, current),\r\n        streams: (0, stats_1.getStreamsFromStats)(id, previous, current),\r\n    };\r\n};\r\nexports.exposeApplicationStatsForPC = exposeApplicationStatsForPC;\r\nvar stringifyArgs = function (args) {\r\n    try {\r\n        return args.map(function (item) { return (typeof item === \"string\" ? item : JSON.stringify(item, replacerFunc())); }).join(\" \");\r\n    }\r\n    catch (_a) {\r\n        // do not log anything to not go into loop\r\n        // can fail with Illegal Invocation of JSON.stringify\r\n        // assumption - when customer also uses custom logger and binds another context\r\n        // so just ignore it\r\n        return \"\";\r\n    }\r\n};\r\n// avoid \"Converting circular structure to JSON\" error while JSON.stringifying\r\nvar replacerFunc = function () {\r\n    var visited = new WeakSet();\r\n    return function (_key, value) {\r\n        if (typeof value === \"object\" && value !== null) {\r\n            if (visited.has(value)) {\r\n                return;\r\n            }\r\n            visited.add(value);\r\n        }\r\n        return value;\r\n    };\r\n};\r\nvar applyPatchForRTT = function (oldStats, newStats) {\r\n    oldStats = oldStats || {};\r\n    newStats = newStats || {};\r\n    var hasOldStats = true;\r\n    if (Object.keys(oldStats).length === 0) {\r\n        hasOldStats = false;\r\n    }\r\n    var keys = Object.keys(newStats);\r\n    var reportKeys = keys.filter(function (key) { return newStats[key].type === \"remote-outbound-rtp\" || newStats[key].type === \"remote-inbound-rtp\"; });\r\n    reportKeys.forEach(function (reportKey) {\r\n        // case for Firefox/Safari\r\n        if (!(\"roundTripTime\" in newStats[reportKey])) {\r\n            newStats[reportKey].roundTripTime = NaN;\r\n        }\r\n        else {\r\n            // case Chrome\r\n            var statsHaveRTTMeasurements = \"roundTripTimeMeasurements\" in newStats[reportKey] &&\r\n                Boolean(oldStats[reportKey]) &&\r\n                \"roundTripTimeMeasurements\" in oldStats[reportKey];\r\n            if (hasOldStats && statsHaveRTTMeasurements) {\r\n                if (newStats[reportKey].roundTripTimeMeasurements === oldStats[reportKey].roundTripTimeMeasurements) {\r\n                    newStats[reportKey].roundTripTime = NaN;\r\n                }\r\n            }\r\n        }\r\n    });\r\n    return newStats;\r\n};\r\nexports.applyPatchForRTT = applyPatchForRTT;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.default = \"1.35.2\";\r\n","\"use strict\";\r\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar utils_1 = require(\"./utils\");\r\nvar WatchRTCHttp = /** @class */ (function () {\r\n    function WatchRTCHttp(options) {\r\n        this.debug = false;\r\n        if (WatchRTCHttp._instance) {\r\n            console.info.apply(console, __spreadArray(__spreadArray([], (0, utils_1.logPrefix)(\"info\"), false), [\"WatchRTCSocket instance already created\"], false));\r\n        }\r\n        else {\r\n            WatchRTCHttp._instance = this;\r\n            this.debug = !!options.debug;\r\n        }\r\n    }\r\n    WatchRTCHttp.prototype.trace = function (url, projectId, rtcRoomId, rtcPeerId) {\r\n        var data = [];\r\n        for (var _i = 4; _i < arguments.length; _i++) {\r\n            data[_i - 4] = arguments[_i];\r\n        }\r\n        var args = Array.prototype.slice.call(data);\r\n        args.push(Date.now());\r\n        if (args[1] instanceof RTCPeerConnection) {\r\n            args[1] = args[1].__rtcStatsId;\r\n        }\r\n        var response = fetch(url, {\r\n            method: \"POST\",\r\n            mode: \"cors\",\r\n            cache: \"no-cache\",\r\n            credentials: \"same-origin\",\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n            },\r\n            body: JSON.stringify({\r\n                data: data,\r\n                projectId: projectId,\r\n                rtcRoomId: rtcRoomId,\r\n                rtcPeerId: rtcPeerId,\r\n            }),\r\n        });\r\n        return response\r\n            .then(function () { return ({}); })\r\n            .catch(function (err) {\r\n            console.log.apply(console, __spreadArray(__spreadArray([], (0, utils_1.logPrefix)(\"error\"), false), [err.message, { err: err.stack }], false));\r\n            return { error: err };\r\n        });\r\n    };\r\n    return WatchRTCHttp;\r\n}());\r\nexports.default = WatchRTCHttp;\r\n","\"use strict\";\r\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar utils_1 = require(\"./utils\");\r\nvar LZString = require(\"./lz-string\");\r\nvar PROTOCOL_VERSION = \"2.0\";\r\nvar WatchRTCSocket = /** @class */ (function () {\r\n    function WatchRTCSocket(options) {\r\n        this.connection = null;\r\n        this.wasConnected = false;\r\n        this.buffer = [];\r\n        this.sendInterval = 1;\r\n        this.onClose = function () { };\r\n        this.debug = false;\r\n        this.dataCollection = true;\r\n        this.sendPromises = [];\r\n        this.trace = function (_a) {\r\n            var _b;\r\n            var data = _a.data, options = _a.options;\r\n            var args = Array.prototype.slice.call(data);\r\n            args.push(Date.now());\r\n            if (args[1] instanceof RTCPeerConnection) {\r\n                args[1] = args[1].__rtcStatsId;\r\n            }\r\n            if (!WatchRTCSocket._instance.dataCollection) {\r\n                if (options === null || options === void 0 ? void 0 : options.promiseFuncs) {\r\n                    options.promiseFuncs.resolve({ error: \"Data collection disabled\" });\r\n                }\r\n                return;\r\n            }\r\n            if (!WatchRTCSocket._instance.connection) {\r\n                if (WatchRTCSocket._instance.buffer.length > 1000) {\r\n                    if (options === null || options === void 0 ? void 0 : options.promiseFuncs) {\r\n                        options.promiseFuncs.resolve({ error: \"Message buffer size exceeded\" });\r\n                    }\r\n                    return;\r\n                }\r\n                WatchRTCSocket._instance.buffer.push(args);\r\n                if (options === null || options === void 0 ? void 0 : options.promiseFuncs) {\r\n                    WatchRTCSocket._instance.sendPromises.push(options.promiseFuncs);\r\n                }\r\n                return;\r\n            }\r\n            if (WatchRTCSocket._instance.connection.readyState === WebSocket.OPEN) {\r\n                WatchRTCSocket._instance.buffer.push(args);\r\n                if (options === null || options === void 0 ? void 0 : options.promiseFuncs) {\r\n                    WatchRTCSocket._instance.sendPromises.push(options.promiseFuncs);\r\n                }\r\n                if (WatchRTCSocket._instance.buffer.length >= WatchRTCSocket._instance.sendInterval) {\r\n                    var lines = JSON.stringify(WatchRTCSocket._instance.buffer);\r\n                    var compressedMessage = LZString.compressToEncodedURIComponent(lines);\r\n                    if (WatchRTCSocket._instance.debug) {\r\n                        var logFunc = (_b = console._original_log) !== null && _b !== void 0 ? _b : console.log;\r\n                        logFunc.apply(void 0, __spreadArray(__spreadArray([], (0, utils_1.logPrefix)(\"info\"), false), [\"lines: \".concat(lines.length)], false));\r\n                        logFunc.apply(void 0, __spreadArray(__spreadArray([], (0, utils_1.logPrefix)(\"info\"), false), [\"compressedMessage: \".concat(compressedMessage.length)], false));\r\n                    }\r\n                    WatchRTCSocket._instance.buffer = [];\r\n                    WatchRTCSocket._instance.connection.send(compressedMessage);\r\n                    WatchRTCSocket._instance.sendPromises.forEach(function (_a) {\r\n                        var resolve = _a.resolve;\r\n                        return resolve({});\r\n                    });\r\n                    WatchRTCSocket._instance.sendPromises = [];\r\n                }\r\n            }\r\n        };\r\n        if (WatchRTCSocket._instance) {\r\n            console.info.apply(console, __spreadArray(__spreadArray([], (0, utils_1.logPrefix)(\"info\"), false), [\"WatchRTCSocket instance already created\"], false));\r\n        }\r\n        else {\r\n            WatchRTCSocket._instance = this;\r\n            this.debug = !!options.debug;\r\n        }\r\n    }\r\n    WatchRTCSocket.prototype.connect = function (url, onData, onError, onOpen, onClose) {\r\n        if (onOpen === void 0) { onOpen = function () { }; }\r\n        if (onClose === void 0) { onClose = function () { }; }\r\n        if (WatchRTCSocket._instance.connection) {\r\n            WatchRTCSocket._instance.connection.close();\r\n        }\r\n        var _this = WatchRTCSocket._instance;\r\n        WatchRTCSocket._instance.connection = new WebSocket(url, PROTOCOL_VERSION);\r\n        WatchRTCSocket._instance.connection.onopen = onOpen;\r\n        WatchRTCSocket._instance.connection.onclose = onClose;\r\n        WatchRTCSocket._instance.connection.onmessage = function (e) {\r\n            var _a;\r\n            try {\r\n                var data = JSON.parse(e.data);\r\n                if (data.error) {\r\n                    (_a = _this === null || _this === void 0 ? void 0 : _this.connection) === null || _a === void 0 ? void 0 : _a.close();\r\n                    _this.connection = null;\r\n                    console.info.apply(console, __spreadArray(__spreadArray([], (0, utils_1.logPrefix)(\"error\"), false), [\"\\n\" + data.error], false));\r\n                    onError(data.error, \"auth\");\r\n                }\r\n                else {\r\n                    if (data.sendInterval) {\r\n                        WatchRTCSocket._instance.sendInterval = data.sendInterval;\r\n                    }\r\n                    onData(data);\r\n                    WatchRTCSocket._instance.wasConnected = true;\r\n                }\r\n            }\r\n            catch (err) {\r\n                console.info.apply(console, __spreadArray(__spreadArray([], (0, utils_1.logPrefix)(\"error\"), false), [{ err: err.stack }], false));\r\n                onError(err.message);\r\n            }\r\n        };\r\n        WatchRTCSocket._instance.connection.onerror = function (e) {\r\n            console.info.apply(console, __spreadArray(__spreadArray([], (0, utils_1.logPrefix)(\"error\"), false), [\"\\n\", e], false));\r\n            onError(e, \"connection\");\r\n        };\r\n    };\r\n    WatchRTCSocket.prototype.close = function () {\r\n        WatchRTCSocket._instance.buffer = [];\r\n        WatchRTCSocket._instance.sendPromises.forEach(function (_a) {\r\n            var resolve = _a.resolve;\r\n            return resolve({ error: \"Connection was close\" });\r\n        });\r\n        WatchRTCSocket._instance.sendPromises = [];\r\n        if (WatchRTCSocket._instance.connection) {\r\n            WatchRTCSocket._instance.connection.close();\r\n            WatchRTCSocket._instance.onClose();\r\n            WatchRTCSocket._instance.connection = null;\r\n        }\r\n    };\r\n    WatchRTCSocket.prototype.disableDataCollection = function () {\r\n        if (WatchRTCSocket._instance.debug) {\r\n            console.log.apply(console, __spreadArray(__spreadArray([], (0, utils_1.logPrefix)(\"info\"), false), [\"Data collection disabled.\"], false));\r\n        }\r\n        WatchRTCSocket._instance.dataCollection = false;\r\n    };\r\n    WatchRTCSocket.prototype.enableDataCollection = function () {\r\n        if (WatchRTCSocket._instance.debug) {\r\n            console.log.apply(console, __spreadArray(__spreadArray([], (0, utils_1.logPrefix)(\"info\"), false), [\"Data collection enabled.\"], false));\r\n        }\r\n        WatchRTCSocket._instance.dataCollection = true;\r\n    };\r\n    WatchRTCSocket.prototype.toggleDebug = function (debug) {\r\n        WatchRTCSocket._instance.debug = debug;\r\n    };\r\n    return WatchRTCSocket;\r\n}());\r\nexports.default = WatchRTCSocket;\r\n","!(function (e, r) {\n  \"object\" == typeof exports && \"undefined\" != typeof module\n    ? r(exports)\n    : \"function\" == typeof define && define.amd\n    ? define([\"exports\"], r)\n    : r(((e = \"undefined\" != typeof globalThis ? globalThis : e || self).DetectGPU = {}));\n})(this, function (e) {\n  \"use strict\";\n  var r = function (e, n) {\n    return (r =\n      Object.setPrototypeOf ||\n      ({ __proto__: [] } instanceof Array &&\n        function (e, r) {\n          e.__proto__ = r;\n        }) ||\n      function (e, r) {\n        for (var n in r) Object.prototype.hasOwnProperty.call(r, n) && (e[n] = r[n]);\n      })(e, n);\n  };\n  function n(e, r, n, t) {\n    return new (n || (n = Promise))(function (o, a) {\n      function i(e) {\n        try {\n          u(t.next(e));\n        } catch (e) {\n          a(e);\n        }\n      }\n      function c(e) {\n        try {\n          u(t.throw(e));\n        } catch (e) {\n          a(e);\n        }\n      }\n      function u(e) {\n        var r;\n        e.done\n          ? o(e.value)\n          : ((r = e.value),\n            r instanceof n\n              ? r\n              : new n(function (e) {\n                  e(r);\n                })).then(i, c);\n      }\n      u((t = t.apply(e, r || [])).next());\n    });\n  }\n  function t(e, r) {\n    var n,\n      t,\n      o,\n      a,\n      i = {\n        label: 0,\n        sent: function () {\n          if (1 & o[0]) throw o[1];\n          return o[1];\n        },\n        trys: [],\n        ops: [],\n      };\n    return (\n      (a = { next: c(0), throw: c(1), return: c(2) }),\n      \"function\" == typeof Symbol &&\n        (a[Symbol.iterator] = function () {\n          return this;\n        }),\n      a\n    );\n    function c(a) {\n      return function (c) {\n        return (function (a) {\n          if (n) throw new TypeError(\"Generator is already executing.\");\n          for (; i; )\n            try {\n              if (\n                ((n = 1),\n                t &&\n                  (o = 2 & a[0] ? t.return : a[0] ? t.throw || ((o = t.return) && o.call(t), 0) : t.next) &&\n                  !(o = o.call(t, a[1])).done)\n              )\n                return o;\n              switch (((t = 0), o && (a = [2 & a[0], o.value]), a[0])) {\n                case 0:\n                case 1:\n                  o = a;\n                  break;\n                case 4:\n                  return i.label++, { value: a[1], done: !1 };\n                case 5:\n                  i.label++, (t = a[1]), (a = [0]);\n                  continue;\n                case 7:\n                  (a = i.ops.pop()), i.trys.pop();\n                  continue;\n                default:\n                  if (!((o = i.trys), (o = o.length > 0 && o[o.length - 1]) || (6 !== a[0] && 2 !== a[0]))) {\n                    i = 0;\n                    continue;\n                  }\n                  if (3 === a[0] && (!o || (a[1] > o[0] && a[1] < o[3]))) {\n                    i.label = a[1];\n                    break;\n                  }\n                  if (6 === a[0] && i.label < o[1]) {\n                    (i.label = o[1]), (o = a);\n                    break;\n                  }\n                  if (o && i.label < o[2]) {\n                    (i.label = o[2]), i.ops.push(a);\n                    break;\n                  }\n                  o[2] && i.ops.pop(), i.trys.pop();\n                  continue;\n              }\n              a = r.call(e, i);\n            } catch (e) {\n              (a = [6, e]), (t = 0);\n            } finally {\n              n = o = 0;\n            }\n          if (5 & a[0]) throw a[1];\n          return { value: a[0] ? a[1] : void 0, done: !0 };\n        })([a, c]);\n      };\n    }\n  }\n  var o = [\n    \"geforce 320m\",\n    \"geforce 8600\",\n    \"geforce 8600m gt\",\n    \"geforce 8800 gs\",\n    \"geforce 8800 gt\",\n    \"geforce 9400\",\n    \"geforce 9400m g\",\n    \"geforce 9400m\",\n    \"geforce 9600m gt\",\n    \"geforce 9600m\",\n    \"geforce fx go5200\",\n    \"geforce gt 120\",\n    \"geforce gt 130\",\n    \"geforce gt 330m\",\n    \"geforce gtx 285\",\n    \"google swiftshader\",\n    \"intel g41\",\n    \"intel g45\",\n    \"intel gma 4500mhd\",\n    \"intel gma x3100\",\n    \"intel hd 3000\",\n    \"intel q45\",\n    \"legacy\",\n    \"mali-2\",\n    \"mali-3\",\n    \"mali-4\",\n    \"quadro fx 1500\",\n    \"quadro fx 4\",\n    \"quadro fx 5\",\n    \"radeon hd 2400\",\n    \"radeon hd 2600\",\n    \"radeon hd 4670\",\n    \"radeon hd 4850\",\n    \"radeon hd 4870\",\n    \"radeon hd 5670\",\n    \"radeon hd 5750\",\n    \"radeon hd 6290\",\n    \"radeon hd 6300\",\n    \"radeon hd 6310\",\n    \"radeon hd 6320\",\n    \"radeon hd 6490m\",\n    \"radeon hd 6630m\",\n    \"radeon hd 6750m\",\n    \"radeon hd 6770m\",\n    \"radeon hd 6970m\",\n    \"sgx 543\",\n    \"sgx543\",\n  ];\n  function a(e) {\n    return (e = e\n      .toLowerCase()\n      .replace(/^angle ?\\((.+)\\)*$/, \"$1\")\n      .replace(/\\s(\\d{1,2}gb|direct3d.+$)|\\(r\\)| \\([^)]+\\)$/g, \"\"));\n  }\n  const i = 34962;\n  var c = \"undefined\" == typeof window,\n    u = (function () {\n      if (!c) {\n        var e = window.navigator,\n          r = e.userAgent,\n          n = e.platform,\n          t = e.maxTouchPoints,\n          o = /(iphone|ipod|ipad)/i.test(r),\n          a = \"iPad\" === n || (\"MacIntel\" === n && t > 0 && !window.MSStream);\n        return { isIpad: a, isMobile: /android/i.test(r) || o || a, isSafari12: /Version\\/12.+Safari/.test(r) };\n      }\n    })();\n  function f(e, r, n) {\n    if (!n) return [r];\n    var t,\n      o = (function (e) {\n        var r =\n            \"\\n    precision highp float;\\n    attribute vec3 aPosition;\\n    varying float vvv;\\n    void main() {\\n      vvv = 0.31622776601683794;\\n      gl_Position = vec4(aPosition, 1.0);\\n    }\\n  \",\n          n =\n            \"\\n    precision highp float;\\n    varying float vvv;\\n    void main() {\\n      vec4 enc = vec4(1.0, 255.0, 65025.0, 16581375.0) * vvv;\\n      enc = fract(enc);\\n      enc -= enc.yzww * vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0, 0.0);\\n      gl_FragColor = enc;\\n    }\\n  \",\n          t = e.createShader(35633),\n          o = e.createShader(35632),\n          a = e.createProgram();\n        if (!(o && t && a)) return;\n        e.shaderSource(t, r),\n          e.shaderSource(o, n),\n          e.compileShader(t),\n          e.compileShader(o),\n          e.attachShader(a, t),\n          e.attachShader(a, o),\n          e.linkProgram(a),\n          e.detachShader(a, t),\n          e.detachShader(a, o),\n          e.deleteShader(t),\n          e.deleteShader(o),\n          e.useProgram(a);\n        var c = e.createBuffer();\n        e.bindBuffer(i, c), e.bufferData(i, new Float32Array([-1, -1, 0, 3, -1, 0, -1, 3, 0]), 35044);\n        var u = e.getAttribLocation(a, \"aPosition\");\n        e.vertexAttribPointer(u, 3, 5126, !1, 0, 0),\n          e.enableVertexAttribArray(u),\n          e.clearColor(1, 1, 1, 1),\n          e.clear(16384),\n          e.viewport(0, 0, 1, 1),\n          e.drawArrays(4, 0, 3);\n        var f = new Uint8Array(4);\n        return e.readPixels(0, 0, 1, 1, 6408, 5121, f), e.deleteProgram(a), e.deleteBuffer(c), f.join(\"\");\n      })(e),\n      a = \"801621810\",\n      c = \"8016218135\",\n      f = \"80162181161\",\n      l = (null == u ? void 0 : u.isIpad)\n        ? [\n            [\"a7\", f, 12],\n            [\"a8\", c, 15],\n            [\"a8x\", c, 15],\n            [\"a9\", c, 15],\n            [\"a9x\", c, 15],\n            [\"a10\", c, 15],\n            [\"a10x\", c, 15],\n            [\"a12\", a, 15],\n            [\"a12x\", a, 15],\n            [\"a12z\", a, 15],\n            [\"a14\", a, 15],\n            [\"m1\", a, 15],\n          ]\n        : [\n            [\"a7\", f, 12],\n            [\"a8\", c, 12],\n            [\"a9\", c, 15],\n            [\"a10\", c, 15],\n            [\"a11\", a, 15],\n            [\"a12\", a, 15],\n            [\"a13\", a, 15],\n            [\"a14\", a, 15],\n          ];\n    return (\n      \"80162181255\" === o\n        ? (t = l.filter(function (e) {\n            return e[2] >= 14;\n          }))\n        : (t = l.filter(function (e) {\n            return e[1] === o;\n          })).length || (t = l),\n      t.map(function (e) {\n        var r = e[0];\n        return \"apple \".concat(r, \" gpu\");\n      })\n    );\n  }\n  var l = [],\n    d = [];\n  function s(e, r) {\n    if (e === r) return 0;\n    var n = e;\n    e.length > r.length && ((e = r), (r = n));\n    for (var t = e.length, o = r.length; t > 0 && e.charCodeAt(~-t) === r.charCodeAt(~-o); ) t--, o--;\n    for (var a, i = 0; i < t && e.charCodeAt(i) === r.charCodeAt(i); ) i++;\n    if (((o -= i), 0 === (t -= i))) return o;\n    for (var c, u, f = 0, s = 0, h = 0; s < t; ) (d[s] = e.charCodeAt(i + s)), (l[s] = ++s);\n    for (; h < o; )\n      for (a = r.charCodeAt(i + h), c = h++, f = h, s = 0; s < t; s++)\n        (u = a === d[s] ? c : c + 1), (c = l[s]), (f = l[s] = c > f ? (u > f ? f + 1 : u) : u > c ? c + 1 : u);\n    return f;\n  }\n  function h(e) {\n    return null != e;\n  }\n  var v = (function (e) {\n    function n(r) {\n      var n = this.constructor,\n        t = e.call(this, r) || this;\n      return Object.setPrototypeOf(t, n.prototype), t;\n    }\n    return (\n      (function (e, n) {\n        if (\"function\" != typeof n && null !== n)\n          throw new TypeError(\"Class extends value \" + String(n) + \" is not a constructor or null\");\n        function t() {\n          this.constructor = e;\n        }\n        r(e, n), (e.prototype = null === n ? Object.create(n) : ((t.prototype = n.prototype), new t()));\n      })(n, e),\n      n\n    );\n  })(Error);\n  (e.getGPUTier = function (e) {\n    var r = void 0 === e ? {} : e,\n      i = r.mobileTiers,\n      l = void 0 === i ? [0, 15, 30, 60] : i,\n      d = r.desktopTiers,\n      p = void 0 === d ? [0, 15, 30, 60] : d,\n      g = r.override,\n      m = void 0 === g ? {} : g,\n      b = r.glContext,\n      w = r.failIfMajorPerformanceCaveat,\n      y = void 0 !== w && w,\n      x = r.benchmarksURL,\n      P = void 0 === x ? \"https://unpkg.com/detect-gpu@\".concat(\"4.0.8\", \"/dist/benchmarks\") : x;\n    return n(void 0, void 0, void 0, function () {\n      var e, r, i, d, g, w, x, A, S, _, C, E, L, M, j, B, k, O, T, U, I, D, R, G, N, K;\n      return t(this, function (W) {\n        switch (W.label) {\n          case 0:\n            if (((e = {}), c)) return [2, { tier: 0, type: \"SSR\" }];\n            if (\n              ((r = m.isIpad),\n              (i = void 0 === r ? !!(null == u ? void 0 : u.isIpad) : r),\n              (d = m.isMobile),\n              (g = void 0 === d ? !!(null == u ? void 0 : u.isMobile) : d),\n              (w = m.screenSize),\n              (x = void 0 === w ? window.screen : w),\n              (A = m.loadBenchmarks),\n              (S =\n                void 0 === A\n                  ? function (e) {\n                      return n(void 0, void 0, void 0, function () {\n                        var r;\n                        return t(this, function (n) {\n                          switch (n.label) {\n                            case 0:\n                              return [\n                                4,\n                                fetch(\"\".concat(P, \"/\").concat(e)).then(function (e) {\n                                  return e.json();\n                                }),\n                              ];\n                            case 1:\n                              if (((r = n.sent()), parseInt(r.shift().split(\".\")[0], 10) < 4))\n                                throw new v(\"Detect GPU benchmark data is out of date. Please update to version 4x\");\n                              return [2, r];\n                          }\n                        });\n                      });\n                    }\n                  : A),\n              (_ = m.renderer),\n              (C = function (e) {\n                for (\n                  var r = 0,\n                    n = g\n                      ? [\"adreno\", \"apple\", \"mali-t\", \"mali\", \"nvidia\", \"powervr\"]\n                      : [\"intel\", \"apple\", \"amd\", \"radeon\", \"nvidia\", \"geforce\"];\n                  r < n.length;\n                  r++\n                ) {\n                  var t = n[r];\n                  if (e.includes(t)) return t;\n                }\n              }),\n              (E = function (r) {\n                return n(void 0, void 0, void 0, function () {\n                  var n, o, a, c, u, f, l, d, h, p, m, b, w, y, P, A, _, E, L, M, j, B, k, O, T, U;\n                  return t(this, function (t) {\n                    switch (t.label) {\n                      case 0:\n                        if (!(n = C(r))) return [2];\n                        (o = \"\"\n                          .concat(g ? \"m\" : \"d\", \"-\")\n                          .concat(n)\n                          .concat(i ? \"-ipad\" : \"\", \".json\")),\n                          (a = e[o] = null !== (U = e[o]) && void 0 !== U ? U : S(o)),\n                          (t.label = 1);\n                      case 1:\n                        return t.trys.push([1, 3, , 4]), [4, a];\n                      case 2:\n                        return (c = t.sent()), [3, 4];\n                      case 3:\n                        if ((u = t.sent()) instanceof v) throw u;\n                        return [2];\n                      case 4:\n                        if (\n                          ((f = (function (e) {\n                            var r,\n                              n =\n                                (e = e.replace(/\\([^)]+\\)/, \"\")).match(/\\d+/) ||\n                                e.match(/(\\W|^)([A-Za-z]{1,3})(\\W|$)/g);\n                            return null !== (r = null == n ? void 0 : n.join(\"\").replace(/\\W|amd/g, \"\")) && void 0 !== r\n                              ? r\n                              : \"\";\n                          })(r)),\n                          (l = c.filter(function (e) {\n                            return e[1] === f;\n                          })).length ||\n                            (l = c.filter(function (e) {\n                              return e[0].includes(r);\n                            })),\n                          0 === (d = l.length))\n                        )\n                          return [2];\n                        for (\n                          h =\n                            d > 1\n                              ? l\n                                  .map(function (e) {\n                                    return [e, s(r, e[0])];\n                                  })\n                                  .sort(function (e, r) {\n                                    return e[1] - r[1];\n                                  })[0][0]\n                              : l[0],\n                            p = h[0],\n                            m = h[3],\n                            b = Number.MAX_VALUE,\n                            y = window.devicePixelRatio,\n                            P = x.width * y * x.height * y,\n                            A = 0,\n                            _ = m;\n                          A < _.length;\n                          A++\n                        )\n                          (E = _[A]),\n                            (L = E[0]),\n                            (M = E[1]),\n                            (j = L * M),\n                            (B = Math.abs(P - j)) < b && ((b = B), (w = E));\n                        return w ? ((O = (k = w)[2]), (T = k[3]), [2, [b, O, p, T]]) : [2];\n                    }\n                  });\n                });\n              }),\n              (L = function (e, r, n, t, o) {\n                return { device: o, fps: t, gpu: n, isMobile: g, tier: e, type: r };\n              }),\n              (j = \"\"),\n              _)\n            )\n              (_ = a(_)), (M = [_]);\n            else {\n              if (\n                !(B =\n                  b ||\n                  (function (e, r) {\n                    void 0 === r && (r = !1);\n                    var n = {\n                      alpha: !1,\n                      antialias: !1,\n                      depth: !1,\n                      failIfMajorPerformanceCaveat: r,\n                      powerPreference: \"high-performance\",\n                      stencil: !1,\n                    };\n                    e && delete n.powerPreference;\n                    var t = window.document.createElement(\"canvas\"),\n                      o = t.getContext(\"webgl\", n) || t.getContext(\"experimental-webgl\", n);\n                    return null != o ? o : void 0;\n                  })(null == u ? void 0 : u.isSafari12, y))\n              )\n                return [2, L(0, \"WEBGL_UNSUPPORTED\")];\n              if (\n                ((k = B.getExtension(\"WEBGL_debug_renderer_info\")) && (_ = B.getParameter(k.UNMASKED_RENDERER_WEBGL)),\n                !_)\n              )\n                return [2, L(1, \"FALLBACK\")];\n              (j = _),\n                (_ = a(_)),\n                (M = (function (e, r, n) {\n                  return \"apple gpu\" === r ? f(e, r, n) : [r];\n                })(B, _, g));\n            }\n            return [4, Promise.all(M.map(E))];\n          case 1:\n            if (\n              !(O = W.sent()\n                .filter(h)\n                .sort(function (e, r) {\n                  var n = e[0],\n                    t = void 0 === n ? Number.MAX_VALUE : n,\n                    o = e[1],\n                    a = r[0],\n                    i = void 0 === a ? Number.MAX_VALUE : a,\n                    c = r[1];\n                  return t === i ? o - c : t - i;\n                })).length\n            )\n              return [\n                2,\n                (T = o.find(function (e) {\n                  return _.includes(e);\n                }))\n                  ? L(0, \"BLOCKLISTED\", T)\n                  : L(1, \"FALLBACK\", \"\".concat(_, \" (\").concat(j, \")\")),\n              ];\n            if (((U = O[0]), (I = U[1]), (D = U[2]), (R = U[3]), -1 === I)) return [2, L(0, \"BLOCKLISTED\", D, I, R)];\n            for (G = g ? l : p, N = 0, K = 0; K < G.length; K++) I >= G[K] && (N = K);\n            return [2, L(N, \"BENCHMARK\", D, I, R)];\n        }\n      });\n    });\n  }),\n    Object.defineProperty(e, \"__esModule\", { value: !0 });\n});\n//# sourceMappingURL=detect-gpu.umd.js.map\n","var map = {\n\t\"./d-adreno.json\": 622,\n\t\"./d-amd.json\": 183,\n\t\"./d-apple.json\": 732,\n\t\"./d-geforce.json\": 405,\n\t\"./d-intel.json\": 178,\n\t\"./d-nvidia.json\": 217,\n\t\"./d-radeon.json\": 145,\n\t\"./m-adreno.json\": 921,\n\t\"./m-apple-ipad.json\": 535,\n\t\"./m-apple.json\": 438,\n\t\"./m-intel.json\": 283,\n\t\"./m-mali-t.json\": 327,\n\t\"./m-mali.json\": 538,\n\t\"./m-nvidia.json\": 884,\n\t\"./m-powervr.json\": 214\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 804;","var LZString = (function () {\n  function o(o, r) {\n    if (!t[o]) {\n      t[o] = {};\n      for (var n = 0; n < o.length; n++) t[o][o.charAt(n)] = n;\n    }\n    return t[o][r];\n  }\n  var r = String.fromCharCode,\n    n = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\",\n    e = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$\",\n    t = {},\n    i = {\n      compressToBase64: function (o) {\n        if (null == o) return \"\";\n        var r = i._compress(o, 6, function (o) {\n          return n.charAt(o);\n        });\n        switch (r.length % 4) {\n          default:\n          case 0:\n            return r;\n          case 1:\n            return r + \"===\";\n          case 2:\n            return r + \"==\";\n          case 3:\n            return r + \"=\";\n        }\n      },\n      decompressFromBase64: function (r) {\n        return null == r\n          ? \"\"\n          : \"\" == r\n          ? null\n          : i._decompress(r.length, 32, function (e) {\n              return o(n, r.charAt(e));\n            });\n      },\n      compressToUTF16: function (o) {\n        return null == o\n          ? \"\"\n          : i._compress(o, 15, function (o) {\n              return r(o + 32);\n            }) + \" \";\n      },\n      decompressFromUTF16: function (o) {\n        return null == o\n          ? \"\"\n          : \"\" == o\n          ? null\n          : i._decompress(o.length, 16384, function (r) {\n              return o.charCodeAt(r) - 32;\n            });\n      },\n      compressToUint8Array: function (o) {\n        for (\n          var r = i.compress(o), n = new Uint8Array(2 * r.length), e = 0, t = r.length;\n          t > e;\n          e++\n        ) {\n          var s = r.charCodeAt(e);\n          (n[2 * e] = s >>> 8), (n[2 * e + 1] = s % 256);\n        }\n        return n;\n      },\n      decompressFromUint8Array: function (o) {\n        if (null === o || void 0 === o) return i.decompress(o);\n        for (var n = new Array(o.length / 2), e = 0, t = n.length; t > e; e++)\n          n[e] = 256 * o[2 * e] + o[2 * e + 1];\n        var s = [];\n        return (\n          n.forEach(function (o) {\n            s.push(r(o));\n          }),\n          i.decompress(s.join(\"\"))\n        );\n      },\n      compressToEncodedURIComponent: function (o) {\n        return null == o\n          ? \"\"\n          : i._compress(o, 6, function (o) {\n              return e.charAt(o);\n            });\n      },\n      decompressFromEncodedURIComponent: function (r) {\n        return null == r\n          ? \"\"\n          : \"\" == r\n          ? null\n          : ((r = r.replace(/ /g, \"+\")),\n            i._decompress(r.length, 32, function (n) {\n              return o(e, r.charAt(n));\n            }));\n      },\n      compress: function (o) {\n        return i._compress(o, 16, function (o) {\n          return r(o);\n        });\n      },\n      _compress: function (o, r, n) {\n        if (null == o) return \"\";\n        var e,\n          t,\n          i,\n          s = {},\n          p = {},\n          u = \"\",\n          c = \"\",\n          a = \"\",\n          l = 2,\n          f = 3,\n          h = 2,\n          d = [],\n          m = 0,\n          v = 0;\n        for (i = 0; i < o.length; i += 1)\n          if (\n            ((u = o.charAt(i)),\n            Object.prototype.hasOwnProperty.call(s, u) || ((s[u] = f++), (p[u] = !0)),\n            (c = a + u),\n            Object.prototype.hasOwnProperty.call(s, c))\n          )\n            a = c;\n          else {\n            if (Object.prototype.hasOwnProperty.call(p, a)) {\n              if (a.charCodeAt(0) < 256) {\n                for (e = 0; h > e; e++)\n                  (m <<= 1), v == r - 1 ? ((v = 0), d.push(n(m)), (m = 0)) : v++;\n                for (t = a.charCodeAt(0), e = 0; 8 > e; e++)\n                  (m = (m << 1) | (1 & t)),\n                    v == r - 1 ? ((v = 0), d.push(n(m)), (m = 0)) : v++,\n                    (t >>= 1);\n              } else {\n                for (t = 1, e = 0; h > e; e++)\n                  (m = (m << 1) | t), v == r - 1 ? ((v = 0), d.push(n(m)), (m = 0)) : v++, (t = 0);\n                for (t = a.charCodeAt(0), e = 0; 16 > e; e++)\n                  (m = (m << 1) | (1 & t)),\n                    v == r - 1 ? ((v = 0), d.push(n(m)), (m = 0)) : v++,\n                    (t >>= 1);\n              }\n              l--, 0 == l && ((l = Math.pow(2, h)), h++), delete p[a];\n            } else\n              for (t = s[a], e = 0; h > e; e++)\n                (m = (m << 1) | (1 & t)),\n                  v == r - 1 ? ((v = 0), d.push(n(m)), (m = 0)) : v++,\n                  (t >>= 1);\n            l--, 0 == l && ((l = Math.pow(2, h)), h++), (s[c] = f++), (a = String(u));\n          }\n        if (\"\" !== a) {\n          if (Object.prototype.hasOwnProperty.call(p, a)) {\n            if (a.charCodeAt(0) < 256) {\n              for (e = 0; h > e; e++)\n                (m <<= 1), v == r - 1 ? ((v = 0), d.push(n(m)), (m = 0)) : v++;\n              for (t = a.charCodeAt(0), e = 0; 8 > e; e++)\n                (m = (m << 1) | (1 & t)),\n                  v == r - 1 ? ((v = 0), d.push(n(m)), (m = 0)) : v++,\n                  (t >>= 1);\n            } else {\n              for (t = 1, e = 0; h > e; e++)\n                (m = (m << 1) | t), v == r - 1 ? ((v = 0), d.push(n(m)), (m = 0)) : v++, (t = 0);\n              for (t = a.charCodeAt(0), e = 0; 16 > e; e++)\n                (m = (m << 1) | (1 & t)),\n                  v == r - 1 ? ((v = 0), d.push(n(m)), (m = 0)) : v++,\n                  (t >>= 1);\n            }\n            l--, 0 == l && ((l = Math.pow(2, h)), h++), delete p[a];\n          } else\n            for (t = s[a], e = 0; h > e; e++)\n              (m = (m << 1) | (1 & t)),\n                v == r - 1 ? ((v = 0), d.push(n(m)), (m = 0)) : v++,\n                (t >>= 1);\n          l--, 0 == l && ((l = Math.pow(2, h)), h++);\n        }\n        for (t = 2, e = 0; h > e; e++)\n          (m = (m << 1) | (1 & t)), v == r - 1 ? ((v = 0), d.push(n(m)), (m = 0)) : v++, (t >>= 1);\n        for (;;) {\n          if (((m <<= 1), v == r - 1)) {\n            d.push(n(m));\n            break;\n          }\n          v++;\n        }\n        return d.join(\"\");\n      },\n      decompress: function (o) {\n        return null == o\n          ? \"\"\n          : \"\" == o\n          ? null\n          : i._decompress(o.length, 32768, function (r) {\n              return o.charCodeAt(r);\n            });\n      },\n      _decompress: function (o, n, e) {\n        var t,\n          i,\n          s,\n          p,\n          u,\n          c,\n          a,\n          l,\n          f = [],\n          h = 4,\n          d = 4,\n          m = 3,\n          v = \"\",\n          w = [],\n          A = { val: e(0), position: n, index: 1 };\n        for (i = 0; 3 > i; i += 1) f[i] = i;\n        for (p = 0, c = Math.pow(2, 2), a = 1; a != c; )\n          (u = A.val & A.position),\n            (A.position >>= 1),\n            0 == A.position && ((A.position = n), (A.val = e(A.index++))),\n            (p |= (u > 0 ? 1 : 0) * a),\n            (a <<= 1);\n        switch ((t = p)) {\n          case 0:\n            for (p = 0, c = Math.pow(2, 8), a = 1; a != c; )\n              (u = A.val & A.position),\n                (A.position >>= 1),\n                0 == A.position && ((A.position = n), (A.val = e(A.index++))),\n                (p |= (u > 0 ? 1 : 0) * a),\n                (a <<= 1);\n            l = r(p);\n            break;\n          case 1:\n            for (p = 0, c = Math.pow(2, 16), a = 1; a != c; )\n              (u = A.val & A.position),\n                (A.position >>= 1),\n                0 == A.position && ((A.position = n), (A.val = e(A.index++))),\n                (p |= (u > 0 ? 1 : 0) * a),\n                (a <<= 1);\n            l = r(p);\n            break;\n          case 2:\n            return \"\";\n        }\n        for (f[3] = l, s = l, w.push(l); ; ) {\n          if (A.index > o) return \"\";\n          for (p = 0, c = Math.pow(2, m), a = 1; a != c; )\n            (u = A.val & A.position),\n              (A.position >>= 1),\n              0 == A.position && ((A.position = n), (A.val = e(A.index++))),\n              (p |= (u > 0 ? 1 : 0) * a),\n              (a <<= 1);\n          switch ((l = p)) {\n            case 0:\n              for (p = 0, c = Math.pow(2, 8), a = 1; a != c; )\n                (u = A.val & A.position),\n                  (A.position >>= 1),\n                  0 == A.position && ((A.position = n), (A.val = e(A.index++))),\n                  (p |= (u > 0 ? 1 : 0) * a),\n                  (a <<= 1);\n              (f[d++] = r(p)), (l = d - 1), h--;\n              break;\n            case 1:\n              for (p = 0, c = Math.pow(2, 16), a = 1; a != c; )\n                (u = A.val & A.position),\n                  (A.position >>= 1),\n                  0 == A.position && ((A.position = n), (A.val = e(A.index++))),\n                  (p |= (u > 0 ? 1 : 0) * a),\n                  (a <<= 1);\n              (f[d++] = r(p)), (l = d - 1), h--;\n              break;\n            case 2:\n              return w.join(\"\");\n          }\n          if ((0 == h && ((h = Math.pow(2, m)), m++), f[l])) v = f[l];\n          else {\n            if (l !== d) return null;\n            v = s + s.charAt(0);\n          }\n          w.push(v),\n            (f[d++] = s + v.charAt(0)),\n            h--,\n            (s = v),\n            0 == h && ((h = Math.pow(2, m)), m++);\n        }\n      },\n    };\n  return i;\n})();\n\"function\" == typeof define && define.amd\n  ? define(function () {\n      return LZString;\n    })\n  : \"undefined\" != typeof module && null != module && (module.exports = LZString);\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// module exports must be returned from runtime so entry inlining is disabled\n// startup\n// Load entry module and return exports\nreturn __webpack_require__(607);\n","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))"],"sourceRoot":""}